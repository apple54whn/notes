(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{439:function(s,a,t){"use strict";t.r(a);var r=t(2),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搜索"}},[s._v("#")]),s._v(" 搜索")]),s._v(" "),t("h2",{attrs:{id:"简单搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简单搜索"}},[s._v("#")]),s._v(" 简单搜索")]),s._v(" "),t("h3",{attrs:{id:"根据-id-搜素"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#根据-id-搜素"}},[s._v("#")]),s._v(" 根据 _id 搜素")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("GET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("h3",{attrs:{id:"search—pretty"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search—pretty"}},[s._v("#")]),s._v(" _search—pretty")]),s._v(" "),t("p",[s._v("使得返回的json更易查看，但是我这所有都很好看❓")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("GET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/_search?pretty\n")])])]),t("h3",{attrs:{id:"search—搜索所有数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search—搜索所有数据"}},[s._v("#")]),s._v(" _search—搜索所有数据")]),s._v(" "),t("p",[t("strong",[s._v("默认返回10条数据")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("GET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/_search\n")])])]),t("h3",{attrs:{id:"search—条件搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search—条件搜索"}},[s._v("#")]),s._v(" _search—条件搜索")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("GET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/_search?q"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("name:zhangsan\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zhangsan lisi 是或的关系")]),s._v("\nGET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/_search?q"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("name:zhangsan lisi\n")])])]),t("h3",{attrs:{id:"search—指定响应-field"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search—指定响应-field"}},[s._v("#")]),s._v(" _search—指定响应 Field")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("GET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/_search?_source"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("id,name\n")])])]),t("p",[t("s",[s._v("如不需要返回元数据，仅仅返回原始数据（查询一条文档）。过时了")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("GET /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_source\n")])])]),t("h3",{attrs:{id:"head—判断-document-存在"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#head—判断-document-存在"}},[s._v("#")]),s._v(" HEAD—判断 Document 存在")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("HEAD /"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/_doc/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("p",[t("strong",[s._v("根据返回的 HTTP 状态码来判断")])]),s._v(" "),t("ul",[t("li",[s._v("200：存在")]),s._v(" "),t("li",[s._v("404：不存在")])]),s._v(" "),t("h2",{attrs:{id:"搜索结果分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搜索结果分析"}},[s._v("#")]),s._v(" 搜索结果分析")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"took"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"timed_out"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_shards"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"total"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"successful"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"skipped"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"failed"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hits"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"total"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"max_score"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2876821")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hits"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xc_course"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4028e58161bcf7f40161bcf8b77c0000"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_score"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2876821")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_source"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bootstrap开发框架"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bootstrap是由Twitter推出的一个前台页面开发框架"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"studymodel"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"201008"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("ul",[t("li",[s._v("took：本次操作花费的时间，单位为毫秒")]),s._v(" "),t("li",[s._v("timed_out：请求是否超时")]),s._v(" "),t("li",[s._v("_shards：说明本次操作共搜索了哪些分片")]),s._v(" "),t("li",[s._v("hits：搜索命中的记录")]),s._v(" "),t("li",[s._v("hits.total ： 符合条件的文档总数")]),s._v(" "),t("li",[s._v("hits.hits ：匹配度较高的前N个文档")]),s._v(" "),t("li",[s._v("hits.max_score：文档匹配得分，这里为最高分")]),s._v(" "),t("li",[s._v("_score：每个文档都有一个匹配度得分，按照降序排列")]),s._v(" "),t("li",[s._v("_source：显示了文档的原始内容")])]),s._v(" "),t("h2",{attrs:{id:"dsl-搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dsl-搜索"}},[s._v("#")]),s._v(" DSL 搜索")]),s._v(" "),t("p",[t("strong",[s._v("DSL（Domain Specifific Language）")]),s._v("："),t("strong",[s._v("特定领域语言")]),s._v("，以JSON请求体的形式出现")])])}),[],!1,null,null,null);a.default=e.exports}}]);