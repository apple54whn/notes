<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Servlet | Conanan</title>
    <meta name="description" content="Good Good Study, Day Day Up!">
    <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.721694fb.css" as="style"><link rel="preload" href="/assets/js/app.4c2406b8.js" as="script"><link rel="preload" href="/assets/js/2.4ce794f3.js" as="script"><link rel="preload" href="/assets/js/157.fd08fd72.js" as="script"><link rel="preload" href="/assets/js/33.9b523a1b.js" as="script"><link rel="prefetch" href="/assets/js/10.23584843.js"><link rel="prefetch" href="/assets/js/100.c8b7e6eb.js"><link rel="prefetch" href="/assets/js/101.22710827.js"><link rel="prefetch" href="/assets/js/102.369790c1.js"><link rel="prefetch" href="/assets/js/103.a7c7b572.js"><link rel="prefetch" href="/assets/js/104.7e45de8b.js"><link rel="prefetch" href="/assets/js/105.4791b02d.js"><link rel="prefetch" href="/assets/js/106.61e23a2f.js"><link rel="prefetch" href="/assets/js/107.8ae0e37f.js"><link rel="prefetch" href="/assets/js/108.ad785e65.js"><link rel="prefetch" href="/assets/js/109.f6c3b7e5.js"><link rel="prefetch" href="/assets/js/11.1af6c419.js"><link rel="prefetch" href="/assets/js/110.55979e31.js"><link rel="prefetch" href="/assets/js/111.09bcf468.js"><link rel="prefetch" href="/assets/js/112.17a7c3b1.js"><link rel="prefetch" href="/assets/js/113.9f55e6f6.js"><link rel="prefetch" href="/assets/js/114.ae0d1063.js"><link rel="prefetch" href="/assets/js/115.2b45ae89.js"><link rel="prefetch" href="/assets/js/116.286c2ead.js"><link rel="prefetch" href="/assets/js/117.bd5437e0.js"><link rel="prefetch" href="/assets/js/118.4dd27249.js"><link rel="prefetch" href="/assets/js/119.7be1a2b0.js"><link rel="prefetch" href="/assets/js/12.bc5e4411.js"><link rel="prefetch" href="/assets/js/120.03a04cae.js"><link rel="prefetch" href="/assets/js/121.b657ffcb.js"><link rel="prefetch" href="/assets/js/122.eb76f0ee.js"><link rel="prefetch" href="/assets/js/123.cebd7ceb.js"><link rel="prefetch" href="/assets/js/124.be49618b.js"><link rel="prefetch" href="/assets/js/125.d7aa08e6.js"><link rel="prefetch" href="/assets/js/126.4ad7d0d8.js"><link rel="prefetch" href="/assets/js/127.fe7a1fc9.js"><link rel="prefetch" href="/assets/js/128.18adee58.js"><link rel="prefetch" href="/assets/js/129.65155f32.js"><link rel="prefetch" href="/assets/js/13.46b8bbae.js"><link rel="prefetch" href="/assets/js/130.115199fd.js"><link rel="prefetch" href="/assets/js/131.c30c37e8.js"><link rel="prefetch" href="/assets/js/132.800d09de.js"><link rel="prefetch" href="/assets/js/133.485f2c5a.js"><link rel="prefetch" href="/assets/js/134.68cc802a.js"><link rel="prefetch" href="/assets/js/135.b48b5611.js"><link rel="prefetch" href="/assets/js/136.273edc30.js"><link rel="prefetch" href="/assets/js/137.c51bf33b.js"><link rel="prefetch" href="/assets/js/138.cc73926e.js"><link rel="prefetch" href="/assets/js/139.7f0835b0.js"><link rel="prefetch" href="/assets/js/14.813fdf39.js"><link rel="prefetch" href="/assets/js/140.4b5c8664.js"><link rel="prefetch" href="/assets/js/141.f645668a.js"><link rel="prefetch" href="/assets/js/142.9c31754b.js"><link rel="prefetch" href="/assets/js/143.8dbb577a.js"><link rel="prefetch" href="/assets/js/144.615f3d5a.js"><link rel="prefetch" href="/assets/js/145.3372b6f7.js"><link rel="prefetch" href="/assets/js/146.9d166547.js"><link rel="prefetch" href="/assets/js/147.b35e2060.js"><link rel="prefetch" href="/assets/js/148.2ca9cb36.js"><link rel="prefetch" href="/assets/js/149.b7aae87e.js"><link rel="prefetch" href="/assets/js/15.c027e524.js"><link rel="prefetch" href="/assets/js/150.bad9858c.js"><link rel="prefetch" href="/assets/js/151.fd17d6b4.js"><link rel="prefetch" href="/assets/js/152.2567ef97.js"><link rel="prefetch" href="/assets/js/153.74559d88.js"><link rel="prefetch" href="/assets/js/154.7acecdef.js"><link rel="prefetch" href="/assets/js/155.f457419c.js"><link rel="prefetch" href="/assets/js/156.6fe3ee1a.js"><link rel="prefetch" href="/assets/js/158.2b46cf37.js"><link rel="prefetch" href="/assets/js/159.3ace6e8d.js"><link rel="prefetch" href="/assets/js/16.485682dd.js"><link rel="prefetch" href="/assets/js/160.512cf1fa.js"><link rel="prefetch" href="/assets/js/161.0d0ee2ea.js"><link rel="prefetch" href="/assets/js/162.bbdff718.js"><link rel="prefetch" href="/assets/js/163.4fdc9dff.js"><link rel="prefetch" href="/assets/js/164.20d6ef11.js"><link rel="prefetch" href="/assets/js/165.2881201e.js"><link rel="prefetch" href="/assets/js/166.3c7c3ba0.js"><link rel="prefetch" href="/assets/js/167.2143078a.js"><link rel="prefetch" href="/assets/js/168.9f3840f3.js"><link rel="prefetch" href="/assets/js/169.2da8b99f.js"><link rel="prefetch" href="/assets/js/17.53e3a4c9.js"><link rel="prefetch" href="/assets/js/170.997a014a.js"><link rel="prefetch" href="/assets/js/171.addd9a55.js"><link rel="prefetch" href="/assets/js/172.d3d12b0c.js"><link rel="prefetch" href="/assets/js/173.ebd6be51.js"><link rel="prefetch" href="/assets/js/174.c3546734.js"><link rel="prefetch" href="/assets/js/175.e786b04c.js"><link rel="prefetch" href="/assets/js/176.8a72d21e.js"><link rel="prefetch" href="/assets/js/177.4d74c35d.js"><link rel="prefetch" href="/assets/js/178.05b55aba.js"><link rel="prefetch" href="/assets/js/179.06c93c02.js"><link rel="prefetch" href="/assets/js/18.dac780ce.js"><link rel="prefetch" href="/assets/js/180.7a721d6a.js"><link rel="prefetch" href="/assets/js/181.854b3f72.js"><link rel="prefetch" href="/assets/js/182.19f58d6b.js"><link rel="prefetch" href="/assets/js/183.8f49d5b6.js"><link rel="prefetch" href="/assets/js/184.2128f02f.js"><link rel="prefetch" href="/assets/js/19.5bd66b43.js"><link rel="prefetch" href="/assets/js/20.8b0be400.js"><link rel="prefetch" href="/assets/js/21.26154688.js"><link rel="prefetch" href="/assets/js/22.75f3ad5d.js"><link rel="prefetch" href="/assets/js/23.205b8a93.js"><link rel="prefetch" href="/assets/js/24.78eaf948.js"><link rel="prefetch" href="/assets/js/25.5ac44d02.js"><link rel="prefetch" href="/assets/js/26.44e96c5e.js"><link rel="prefetch" href="/assets/js/27.9149de82.js"><link rel="prefetch" href="/assets/js/28.a117fe70.js"><link rel="prefetch" href="/assets/js/29.03c4dd26.js"><link rel="prefetch" href="/assets/js/3.a07e7c66.js"><link rel="prefetch" href="/assets/js/30.add3b4ce.js"><link rel="prefetch" href="/assets/js/31.c168f15b.js"><link rel="prefetch" href="/assets/js/32.6df3dd67.js"><link rel="prefetch" href="/assets/js/34.87d0684d.js"><link rel="prefetch" href="/assets/js/35.07031e68.js"><link rel="prefetch" href="/assets/js/36.b2d8e023.js"><link rel="prefetch" href="/assets/js/37.6693f2b8.js"><link rel="prefetch" href="/assets/js/38.0adc87b6.js"><link rel="prefetch" href="/assets/js/39.4ee1b450.js"><link rel="prefetch" href="/assets/js/4.3601d982.js"><link rel="prefetch" href="/assets/js/40.3a15c4d2.js"><link rel="prefetch" href="/assets/js/41.5089de95.js"><link rel="prefetch" href="/assets/js/42.b6c516e6.js"><link rel="prefetch" href="/assets/js/43.4d729b64.js"><link rel="prefetch" href="/assets/js/44.afb6ada5.js"><link rel="prefetch" href="/assets/js/45.f90fef77.js"><link rel="prefetch" href="/assets/js/46.3f992a07.js"><link rel="prefetch" href="/assets/js/47.3df4792a.js"><link rel="prefetch" href="/assets/js/48.b1b42695.js"><link rel="prefetch" href="/assets/js/49.1f57735c.js"><link rel="prefetch" href="/assets/js/5.c77010ac.js"><link rel="prefetch" href="/assets/js/50.fb1f131c.js"><link rel="prefetch" href="/assets/js/51.621e6bbe.js"><link rel="prefetch" href="/assets/js/52.d3c5f8e8.js"><link rel="prefetch" href="/assets/js/53.fc428b5d.js"><link rel="prefetch" href="/assets/js/54.a8c7b4e7.js"><link rel="prefetch" href="/assets/js/55.9491ad4c.js"><link rel="prefetch" href="/assets/js/56.cc5535aa.js"><link rel="prefetch" href="/assets/js/57.08a4a942.js"><link rel="prefetch" href="/assets/js/58.ea5e0d13.js"><link rel="prefetch" href="/assets/js/59.e9ab1cc2.js"><link rel="prefetch" href="/assets/js/6.3dc37407.js"><link rel="prefetch" href="/assets/js/60.a0651ffe.js"><link rel="prefetch" href="/assets/js/61.9657adee.js"><link rel="prefetch" href="/assets/js/62.5522a97a.js"><link rel="prefetch" href="/assets/js/63.2c5c6db3.js"><link rel="prefetch" href="/assets/js/64.57e79c12.js"><link rel="prefetch" href="/assets/js/65.5e0e9f19.js"><link rel="prefetch" href="/assets/js/66.e80de9ef.js"><link rel="prefetch" href="/assets/js/67.147e8e38.js"><link rel="prefetch" href="/assets/js/68.26a3c0d4.js"><link rel="prefetch" href="/assets/js/69.8f293aac.js"><link rel="prefetch" href="/assets/js/7.53864b7a.js"><link rel="prefetch" href="/assets/js/70.291565bb.js"><link rel="prefetch" href="/assets/js/71.fe0bdf0f.js"><link rel="prefetch" href="/assets/js/72.61d2bc84.js"><link rel="prefetch" href="/assets/js/73.9fcb62aa.js"><link rel="prefetch" href="/assets/js/74.9d682c13.js"><link rel="prefetch" href="/assets/js/75.3264a4ce.js"><link rel="prefetch" href="/assets/js/76.1f8b1f97.js"><link rel="prefetch" href="/assets/js/77.32b48d28.js"><link rel="prefetch" href="/assets/js/78.b50a8708.js"><link rel="prefetch" href="/assets/js/79.e9abf630.js"><link rel="prefetch" href="/assets/js/8.50c01faa.js"><link rel="prefetch" href="/assets/js/80.180a3806.js"><link rel="prefetch" href="/assets/js/81.7800a9ae.js"><link rel="prefetch" href="/assets/js/82.388bd268.js"><link rel="prefetch" href="/assets/js/83.27d7c820.js"><link rel="prefetch" href="/assets/js/84.a7be62b6.js"><link rel="prefetch" href="/assets/js/85.e286c095.js"><link rel="prefetch" href="/assets/js/86.84fed10f.js"><link rel="prefetch" href="/assets/js/87.4b95dccb.js"><link rel="prefetch" href="/assets/js/88.dd70f5b5.js"><link rel="prefetch" href="/assets/js/89.4a04d404.js"><link rel="prefetch" href="/assets/js/9.947b77c2.js"><link rel="prefetch" href="/assets/js/90.699f3eeb.js"><link rel="prefetch" href="/assets/js/91.9f21bc4f.js"><link rel="prefetch" href="/assets/js/92.8e8caa65.js"><link rel="prefetch" href="/assets/js/93.08b1a369.js"><link rel="prefetch" href="/assets/js/94.8aa7234f.js"><link rel="prefetch" href="/assets/js/95.1d25fc22.js"><link rel="prefetch" href="/assets/js/96.8bb62cc7.js"><link rel="prefetch" href="/assets/js/97.eed16352.js"><link rel="prefetch" href="/assets/js/98.623e948b.js"><link rel="prefetch" href="/assets/js/99.45cfef32.js">
    <link rel="stylesheet" href="/assets/css/0.styles.721694fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Conanan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Basic" class="dropdown-title"><span class="title">Basic</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>OS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Basic/OS/Linux/0 Intro.html" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/Basic/OS/Docker/0 Docker.html" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/Basic/OS/K8/0 Intro.html" class="nav-link">K8</a></li></ul></li><li class="dropdown-item"><h4>Network</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Basic/Network/TCP/IP/0 Intro.html" class="nav-link">TCP/IP</a></li><li class="dropdown-subitem"><a href="/Basic/Network/HTTP/0 Intro.html" class="nav-link">HTTP</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><span class="title">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/DataBase/RDBMS/0 Primer.html" class="nav-link">RDBMS</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Redis/0 Intro.html" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Mongo/0 Intro.html" class="nav-link">Mongo</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Lucene/0 Primer.html" class="nav-link">Lucene</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Solr/0 Primer.html" class="nav-link">Solr</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Elasticsearch/0 Primer.html" class="nav-link">Elasticsearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Design" class="dropdown-title"><span class="title">Design</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Design/Design Pattern/0 Intro.html" class="nav-link">Design Pattern</a></li><li class="dropdown-item"><!----> <a href="/Design/DDD/0 Basic.html" class="nav-link">DDD</a></li><li class="dropdown-item"><!----> <a href="/Design/MicroServer/0 Intro.html" class="nav-link">MicroServer</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/0 Basic.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Jakarta EE/0 Servlet.html" class="nav-link">Jakarta EE</a></li><li class="dropdown-item"><!----> <a href="/Java/Spring/primer/0 Primer.html" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/Java/Persistence/Mybatis/0 Primer.html" class="nav-link">Persistence</a></li><li class="dropdown-item"><!----> <a href="/Java/Authe&amp;Autho/0 Primer.html" class="nav-link">认证&amp;授权</a></li><li class="dropdown-item"><h4>分布式&amp;微服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Dubbo</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Spring Cloud Netflix</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Spring Cloud Alibaba</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Tools/Vim/Vim.html" class="nav-link">Vim</a></li><li class="dropdown-item"><!----> <a href="/Tools/Git/Git.html" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/Tools/Maven/Maven.html" class="nav-link">Maven</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Server" class="dropdown-title"><span class="title">Server</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Server/Tomcat/0 Primer.html" class="nav-link">Tomcat</a></li><li class="dropdown-item"><!----> <a href="/Server/Nginx/0 Primer.html" class="nav-link">Nginx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Front End/H5&amp;CSS3/1 HTML.html" class="nav-link">H5&amp;CSS3</a></li><li class="dropdown-item"><!----> <a href="/Front End/JS/0 入门-0 入门.html" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/Front End/NodeJS/NodeJS-1 入门.html" class="nav-link">NodeJS</a></li><li class="dropdown-item"><!----> <a href="/Front End/Vue/1-1 Primer.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/Front End/微信小程序/1-1 Primer.html" class="nav-link">微信小程序</a></li><li class="dropdown-item"><!----> <a href="/Front End/Android/0 Intro.html" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/Front End/Flutter/0 Intro.html" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Environment" class="dropdown-title"><span class="title">Environment</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Environment/macOS/macOS.html" class="nav-link">macOS</a></li><li class="dropdown-item"><!----> <a href="/Environment/Windows/Windows.html" class="nav-link">Windows</a></li><li class="dropdown-item"><!----> <a href="/Environment/Software/IDEA.html" class="nav-link">Software</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Project" class="dropdown-title"><span class="title">Project</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Project/电商/简介.html" class="nav-link">电商</a></li><li class="dropdown-item"><!----> <a href="/Environment/Linux/Linux.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/Environment/Windows/Windows.html" class="nav-link">Windows</a></li><li class="dropdown-item"><!----> <a href="/Environment/Software/Software.html" class="nav-link">Software</a></li></ul></div></div> <a href="https://github.com/apple54whn/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Basic" class="dropdown-title"><span class="title">Basic</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>OS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Basic/OS/Linux/0 Intro.html" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/Basic/OS/Docker/0 Docker.html" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/Basic/OS/K8/0 Intro.html" class="nav-link">K8</a></li></ul></li><li class="dropdown-item"><h4>Network</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Basic/Network/TCP/IP/0 Intro.html" class="nav-link">TCP/IP</a></li><li class="dropdown-subitem"><a href="/Basic/Network/HTTP/0 Intro.html" class="nav-link">HTTP</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><span class="title">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/DataBase/RDBMS/0 Primer.html" class="nav-link">RDBMS</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Redis/0 Intro.html" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Mongo/0 Intro.html" class="nav-link">Mongo</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Lucene/0 Primer.html" class="nav-link">Lucene</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Solr/0 Primer.html" class="nav-link">Solr</a></li><li class="dropdown-item"><!----> <a href="/DataBase/Elasticsearch/0 Primer.html" class="nav-link">Elasticsearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Design" class="dropdown-title"><span class="title">Design</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Design/Design Pattern/0 Intro.html" class="nav-link">Design Pattern</a></li><li class="dropdown-item"><!----> <a href="/Design/DDD/0 Basic.html" class="nav-link">DDD</a></li><li class="dropdown-item"><!----> <a href="/Design/MicroServer/0 Intro.html" class="nav-link">MicroServer</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/0 Basic.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Jakarta EE/0 Servlet.html" class="nav-link">Jakarta EE</a></li><li class="dropdown-item"><!----> <a href="/Java/Spring/primer/0 Primer.html" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/Java/Persistence/Mybatis/0 Primer.html" class="nav-link">Persistence</a></li><li class="dropdown-item"><!----> <a href="/Java/Authe&amp;Autho/0 Primer.html" class="nav-link">认证&amp;授权</a></li><li class="dropdown-item"><h4>分布式&amp;微服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Dubbo</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Spring Cloud Netflix</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Spring Cloud Alibaba</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Tools/Vim/Vim.html" class="nav-link">Vim</a></li><li class="dropdown-item"><!----> <a href="/Tools/Git/Git.html" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/Tools/Maven/Maven.html" class="nav-link">Maven</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Server" class="dropdown-title"><span class="title">Server</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Server/Tomcat/0 Primer.html" class="nav-link">Tomcat</a></li><li class="dropdown-item"><!----> <a href="/Server/Nginx/0 Primer.html" class="nav-link">Nginx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Front End/H5&amp;CSS3/1 HTML.html" class="nav-link">H5&amp;CSS3</a></li><li class="dropdown-item"><!----> <a href="/Front End/JS/0 入门-0 入门.html" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/Front End/NodeJS/NodeJS-1 入门.html" class="nav-link">NodeJS</a></li><li class="dropdown-item"><!----> <a href="/Front End/Vue/1-1 Primer.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/Front End/微信小程序/1-1 Primer.html" class="nav-link">微信小程序</a></li><li class="dropdown-item"><!----> <a href="/Front End/Android/0 Intro.html" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/Front End/Flutter/0 Intro.html" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Environment" class="dropdown-title"><span class="title">Environment</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Environment/macOS/macOS.html" class="nav-link">macOS</a></li><li class="dropdown-item"><!----> <a href="/Environment/Windows/Windows.html" class="nav-link">Windows</a></li><li class="dropdown-item"><!----> <a href="/Environment/Software/IDEA.html" class="nav-link">Software</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Project" class="dropdown-title"><span class="title">Project</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Project/电商/简介.html" class="nav-link">电商</a></li><li class="dropdown-item"><!----> <a href="/Environment/Linux/Linux.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/Environment/Windows/Windows.html" class="nav-link">Windows</a></li><li class="dropdown-item"><!----> <a href="/Environment/Software/Software.html" class="nav-link">Software</a></li></ul></div></div> <a href="https://github.com/apple54whn/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Jakarta EE</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java/Jakarta EE/0 Servlet.html" class="active sidebar-link">Servlet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#实现-servlet-的方式" class="sidebar-link">实现 Servlet 的方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#实现-servlet-接口" class="sidebar-link">实现 Servlet 接口</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#继承-genericservlet-抽象类" class="sidebar-link">继承 GenericServlet 抽象类</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#继承-httpservlet-抽象类" class="sidebar-link">继承 HttpServlet 抽象类</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#servletconfig" class="sidebar-link">ServletConfig</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#servletcontext" class="sidebar-link">ServletContext</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#servlet3-0" class="sidebar-link">Servlet3.0</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#request" class="sidebar-link">Request</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#request继承体系" class="sidebar-link">Request继承体系</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#获取请求消息数据" class="sidebar-link">获取请求消息数据</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#获取请求参数通用方式" class="sidebar-link">获取请求参数通用方式</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#请求转发" class="sidebar-link">请求转发</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#request域" class="sidebar-link">request域</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#用户登录案例需求" class="sidebar-link">用户登录案例需求</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#response" class="sidebar-link">Response</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#response继承体系" class="sidebar-link">Response继承体系</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#设置响应行中状态码" class="sidebar-link">设置响应行中状态码</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#设置响应头" class="sidebar-link">设置响应头</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#设置响应体" class="sidebar-link">设置响应体</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#重定向" class="sidebar-link">重定向</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#路径的写法" class="sidebar-link">路径的写法</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#输出字符数据到浏览器—乱码" class="sidebar-link">输出字符数据到浏览器—乱码</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#输出字节数据到浏览器" class="sidebar-link">输出字节数据到浏览器</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#验证码案例" class="sidebar-link">验证码案例</a></li></ul></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#url编码" class="sidebar-link">URL编码</a></li><li class="sidebar-sub-header"><a href="/Java/Jakarta EE/0 Servlet.html#文件下载案例" class="sidebar-link">文件下载案例</a></li></ul></li><li><a href="/Java/Jakarta EE/1 Filter.html" class="sidebar-link">1 Filter</a></li><li><a href="/Java/Jakarta EE/2 Listener.html" class="sidebar-link">2 Listener</a></li><li><a href="/Java/Jakarta EE/3 JSP.html" class="sidebar-link">3 JSP（不需要学了）</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="servlet"><a href="#servlet" class="header-anchor">#</a> Servlet</h1> <p>Servlet（server applet）是运行在服务器端的小程序。是 Java EE 规范之一。是 <strong>JavaWeb 三大组件之一</strong>（Servlet、Filter、Listener），可以<strong>接收请求数据、处理请求、完成响应</strong>。</p> <p>Servlet 实质就是一个<strong>接口</strong>，定义了<strong>Java 类能被</strong>浏览器访问到（<strong>或者说被 Tomcat 等 Servlet 容器识别</strong>）的<strong>规则</strong>。那么浏览器如何访问Servlet？</p> <p>给 Servlet 指定一个<strong>路径</strong>，浏览器通过访问路径来访问，一般路径配置在<strong>web.xml</strong>中或直接<strong>注解</strong>（Servlet 3 后）</p> <h2 id="实现-servlet-的方式"><a href="#实现-servlet-的方式" class="header-anchor">#</a> 实现 Servlet 的方式</h2> <ol><li><p>实现<code>javax.servlet.Servlet</code>接口</p></li> <li><p>继承<code>javax.servlet.GenericServlet</code>抽象类</p></li> <li><p>继承<code>javax.servlet.http.HttpServlet</code>抽象类</p> <p>通常我们会去继承<code>HttpServlet</code>类来完成我们的Servlet，但学习还要从<code>javax.servlet.Servlet</code>接口开始</p></li></ol> <h3 id="实现-servlet-接口"><a href="#实现-servlet-接口" class="header-anchor">#</a> 实现 Servlet 接口</h3> <h4 id="实现-javax-servlet-servlet-接口"><a href="#实现-javax-servlet-servlet-接口" class="header-anchor">#</a> 实现 javax.servlet.Servlet 接口</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//初始化，在Servlet对象创建后马上执行，只执行一次</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;init...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//获取Servlet配置信息,</span>
<span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//服务，每次处理请求会被调用</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> 
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span>  <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;service...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		servletResponse<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hello servlet.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
<span class="token comment">//获取Servlet信息，如版本，作者等。一般不会去实现</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//销毁，服务器正常关闭，在Servlet被销毁之前调用，只会被调用一次</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;destroy...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="配置web-xml"><a href="#配置web-xml" class="header-anchor">#</a> 配置web.xml</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>//相同代号
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>cn.itcast01.AServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>//要访问的类，全类名
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>//相同代号
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>//设置URL
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--  访问时：http://localhost:8080/MyServlet ，前提是IDEA中Application context配置的是“/” --&gt;</span>
</code></pre></div><h4 id="执行原理"><a href="#执行原理" class="header-anchor">#</a> 执行原理</h4> <ol><li><p>当Tomcat服务器接受到客户端浏览器的请求后，会解析请求URL路径，获取访问的Servlet的资源路径</p></li> <li><p>查找web.xml文件，是否有对应的<code>&lt;url-pattern&gt;</code>标签体内容。</p></li> <li><p>如果有，则通过<code>&lt;servlet-name&gt;</code>找到对应的<code>&lt;servlet-class&gt;</code>全类名</p></li> <li><p>Tomcat会将字节码文件加载进内存，并且通过反射创建其对象，调用其方法</p> <p>即Servlet<strong>类</strong>由我们来写，但<strong>对象由服务器来创建</strong>，并且<strong>由服务器来调用相应的方法</strong></p></li></ol> <h4 id="生命周期方法"><a href="#生命周期方法" class="header-anchor">#</a> 生命周期方法</h4> <ul><li><p><code>void init(ServletConfig)</code>：<strong>创建Servlet对象后</strong>立即执行初始化方法（只1次）；</p> <ul><li>Servlet的<code>init</code>方法只执行一次，说明<strong>一个Servlet在内存中只存在一个对象(单例)</strong> <ul><li>多用户同时访问可能存在线程安全问题</li> <li>解决：尽量不要在Servlet中定义成员变量。即使定义了成员变量，也不要对其修改值</li></ul></li> <li>Servlet什么时候被创建？
<ol><li><strong>默认</strong>情况下，<strong>第一次被访问时</strong>，Servlet被创建。即<code>&lt;load-on-startup&gt;</code>的值默认为负数。</li> <li>可以<strong>配置</strong>执行Servlet的<strong>创建时机</strong>，在注解中配置<code>loadOnStartup</code>，给出一个<strong>非负整数</strong>即可，数字<strong>越小优先级越高</strong>。</li></ol></li></ul></li> <li><p><code>void service(ServletRequest request, ServletResponse response)</code>：<strong>每次处理请求</strong>时都会被调用；</p></li> <li><p><code>void destroy()</code>：服务器<strong>正常关闭</strong>，<strong>销毁Servlet对象前</strong>执行释放资源的方法（只1次）；</p></li></ul> <h3 id="继承-genericservlet-抽象类"><a href="#继承-genericservlet-抽象类" class="header-anchor">#</a> 继承 GenericServlet 抽象类</h3> <h4 id="继承javax-servlet-genericservlet抽象类"><a href="#继承javax-servlet-genericservlet抽象类" class="header-anchor">#</a> 继承javax.servlet.GenericServlet抽象类</h4> <ul><li><p><code>GenericServlet</code>是<code>Servlet</code>接口的<strong>实现类</strong>，但它是一个<strong>抽象类</strong>，它<strong>唯一的抽象方法就是<code>service()</code>方法</strong>，它将Servlet接口中的其他4个方法做了空实现。</p></li> <li><p>GenericServlet<strong>实现了ServletConfig接口</strong>（4个方法）</p></li> <li><p>GenericServlet<strong>添加了<code>init()</code>方法</strong>，该方法会<strong>被<code>init(ServletConfig)</code>方法调用</strong></p> <p>如果希望对Servlet进行初始化，那么<strong>应该重写<code>init()</code>方法</strong>，而不是<code>init(ServletConfig)</code>方法</p></li></ul> <h3 id="继承-httpservlet-抽象类"><a href="#继承-httpservlet-抽象类" class="header-anchor">#</a> 继承 HttpServlet 抽象类</h3> <h4 id="继承javax-servlet-http-httpservlet抽象类"><a href="#继承javax-servlet-http-httpservlet抽象类" class="header-anchor">#</a> 继承javax.servlet.http.HttpServlet抽象类</h4> <p><code>HttpServlet</code>是<code>GenericServlet</code>接口的实现类，但它也是一个<strong>抽象类</strong>。对HTTP协议的一种封装，简化操作</p> <h4 id="httpservlet处理请求顺序"><a href="#httpservlet处理请求顺序" class="header-anchor">#</a> HttpServlet处理请求顺序</h4> <ol><li>Tomcat<strong>调用HttpServlet继承的</strong>生命周期方法<code>service(ServletRequest sr, ServletResponse srr)</code>对参数进行<strong>强转</strong>为HTTP协议相关的参数类型</li> <li>然后<strong>调用HttpServlet本类的</strong><code>service(HttpServletRequest sr, HttpServletResponse srr)</code>方法</li> <li>获取请求方法，<strong>根据请求方式</strong>来调用<code>doGet()</code>或<code>doPost()</code>或其他，需自己<strong>重写</strong>，否则调用到该方法时返回<code>405</code></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//注解的方式直接配置web.xml</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/ServletAuto&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletAuto</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
     <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> 
        <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hello auto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="servletconfig"><a href="#servletconfig" class="header-anchor">#</a> ServletConfig</h2> <ul><li><p>ServletConfig接口是Servlet中的<code>init()</code>方法的参数类型，服务器会在调用<code>init()</code>方法时传递ServletConfig对象给<code>init()</code></p> <p><strong>ServletConfig对象封装</strong>了Servlet在<code>web.xml</code>中的<strong>配置信息</strong>，它对应<code>&lt;servlet&gt;</code>元素</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>daihao1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>cn.itcast01.AServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>zhangsan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>daihao1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/Aservlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>API如下：</p> <ul><li>String <strong>getInitParameter</strong>(String name)：获取<strong>初始化参数</strong></li> <li>Enumeration <strong>getInitParameterNames</strong>()：获取<strong>所有初始化参数的名称</strong></li> <li>ServletContext <strong>getServletContext</strong>()：<strong>获取ServletContext对象</strong>，这个对象稍后介绍</li> <li>String getServletName()：获取Servlet配置名，即<code>&lt;servlet-name&gt;</code>的值；不常用</li></ul></li></ul> <h2 id="servletcontext"><a href="#servletcontext" class="header-anchor">#</a> ServletContext</h2> <ul><li><p>Java Web四大域对象（前三个为Servlet三大域对象）：</p> <ul><li><p>application(当前web应用)：<strong>ServletContext</strong></p></li> <li><p>session(一次会话)：<strong>HttpSession</strong></p></li> <li><p>request(一次请求)：<strong>ServletRequest</strong></p></li> <li><p>page(jsp有效)：<strong>PageContext</strong></p></li></ul></li> <li><p>ServletContext：<strong>代表整个web应用</strong>，可以<strong>和程序的容器</strong>(服务器)来<strong>通信</strong>，服务器会为每个应用/WEB站点创建一个ServletContext对象。<strong>创建在服务器启动后</strong>完成，<strong>销毁在服务器正常吃关闭前</strong>完成。<strong>一个项目只有一个ServletContext对象</strong>，我们可以在N多个Servlet中来获取这个唯一的对象，以传递数据</p></li> <li><p>获取</p> <ul><li>通过**<code>HttpServlet</code>**或<code>GenericServlet</code>获取：<code>this.getServletContext();</code></li> <li>通过**<code>request</code>**对象获取：<code>request.getServletContext();</code></li></ul></li> <li><p>功能：</p> <ol><li><strong>获取MIME类型</strong>：<code>String getMimeType(String file)</code> <ul><li>MIME类型：在互联网通信过程中定义的一种文件数据类型。格式：<code>大类型/小类型</code>，<code>text/html</code>、<code>image/jpeg</code></li></ul></li> <li><strong>域对象</strong>：<strong>共享数据</strong>。ServletContext对象范围是<strong>所有用户所有请求的数据</strong> <ul><li><code>getAttribute(String name)</code>：<strong>获取</strong>域对象中的数据</li> <li><code>setAttribute(String name,Object value)</code>：<strong>存储</strong>一个域属性</li> <li><code>removeAttribute(String name)</code>：<strong>移除</strong>域对象中的域属性，name指定域属性不存在时不变化</li> <li><code>Enumeration getAttributeNames()</code>：获取所有域属性的名称`</li></ul></li> <li>🔥获取<strong>文件的真实</strong>(服务器)<strong>路径</strong>：<code>String getRealPath(String path)</code>，即当前Web应用下的资源路径，例子如下：
<ul><li>web目录下资源访问：<code>getRealPath(&quot;/b.txt&quot;)</code></li> <li>WEB-INF目录下的资源访问：<code>getRealPath(&quot;/WEB-INF/c.txt&quot;)</code></li> <li>src目录下的资源访问：<code>getRealPath(&quot;/WEB-INF/classes/a.txt&quot;)</code>，由于src中的文件最终都会放在classes下</li></ul></li></ol></li> <li><p><strong>获取资源相关方法对比</strong></p> <ul><li><strong>获取真实(服务器)路径：<code>getRealPath(String path)</code></strong>，可查找范围最广泛</li> <li><strong>通过类加载器获取资源</strong>：<code>getResourceAsStream(String path);</code>，根据classes或src来判断路径
<ul><li><code>/WEB-INF/classes</code>（src中的文件最终都会放在classes下）和<code>/WEB-INF/lib</code>每个<strong>jar</strong>包！</li></ul></li> <li><strong>Class类获取资源</strong>：<code>InputStream getResourceAsStream(String path)</code>，
<ul><li>路径以<code>/</code>开头，相对classes路径；路径不以<code>/</code>开头，相对当前class文件路径</li></ul></li></ul></li> <li><p>网站访问量</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> count <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
count <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;invite:&quot;</span><span class="token operator">+</span>count<span class="token operator">+</span><span class="token string">&quot;times&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>获取应用/WEB站点初始化参数（getInitParameter()）</p> <ul><li>Servlet也可以获取初始化参数，但它是局部的参数(一个Servlet只能获取自己的初始化参数，不能获取别人的，即初始化参数只为一个Servlet准备)</li> <li>可以配置<strong>应用的初始化参数</strong>，为所有Servlet而用！这需要使用ServletContext才能使用</li> <li>可以使用ServletContext来获取在web.xml文件中配置的<strong>应用初始化参数</strong>！注意，应用初始化参数与Servlet初始化参数不同（Spring中有使用）</li></ul></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>zhangsan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>servletContext<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>​</p> <h2 id="servlet3-0"><a href="#servlet3-0" class="header-anchor">#</a> Servlet3.0</h2> <blockquote><p>JavaEE 6.0 版本及之后的新版本都支持</p></blockquote> <ul><li><p>好处：</p> <ul><li>支持<strong>注解配置</strong>。可以<strong>不需要web.xml了</strong>。</li></ul></li> <li><p>步骤：</p> <ol><li><p>创建JavaEE项目，选择Servlet的版本3.0以上，可以不创建web.xml</p></li> <li><p>定义一个类，实现Servlet接口并重写方法</p></li> <li><p>在类上使用<code>@WebServlet</code>注解，进行配置。<code>@WebServlet(&quot;资源路径&quot;)</code>，可以省略<code>value</code>或<code>urlPatterns</code></p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">WebServlet</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span><span class="token comment">//相当于&lt;Servlet-name&gt;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//代表urlPatterns()属性配置</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">urlPatterns</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//相当于&lt;url-pattern&gt;</span>

    <span class="token keyword">int</span> <span class="token function">loadOnStartup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//相当于&lt;load-on-startup&gt;</span>
    <span class="token class-name">WebInitParam</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">initParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> <span class="token function">asyncSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">smallIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">largeIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></li> <li><p><strong>urlpartten</strong>：<strong>Servlet访问路径</strong>，用<strong>value</strong>替代了，所以可以不写</p> <ul><li><strong>一个Servlet</strong>可以定义<strong>多个访问路径</strong> ： <code>@WebServlet({&quot;/d4&quot;,&quot;/dd4&quot;,&quot;/ddd4&quot;})</code></li> <li><strong>路径定义规则</strong>：
<ul><li><strong><code>/</code></strong>：<strong>仅不会匹配.jsp</strong>，需要<strong>释放静态资源</strong>，（查看Tomcat中web.xml中介绍）
<ul><li>它的<strong>优先级最低</strong>，如果一个请求没有人处理，会执行该DefaultServlet！其实我们在访问index.html时也是在执行该DefaultServlet。</li> <li><strong>不会重写其他Servlet</strong>：即不匹配JSP是因为任何URL后缀为jsp的访问，都会执行名为jsp的Servlet</li></ul></li> <li><strong><code>/*</code></strong>：带通配符（匹配所有<strong>路径型和后缀型</strong>URL，包括.html、.jsp等），<strong>不建议使用</strong>，<strong>除非用在Filter中</strong> <ul><li><strong>会重写其他Servlet</strong>：在访问jsp时会报404</li></ul></li> <li><code>/xxx</code>：路径匹配</li> <li><code>/xxx/xxx</code>：多层路径，称之为目录结构</li> <li><code>*.do</code>：扩展名匹配，*前不能有/，否则报错</li></ul></li></ul></li></ul> <h2 id="request"><a href="#request" class="header-anchor">#</a> Request</h2> <h3 id="request继承体系"><a href="#request继承体系" class="header-anchor">#</a> Request继承体系</h3> <div class="language- extra-class"><pre class="language-text"><code>ServletRequest 接口
      |
     继承
      |
HttpServletRequest 接口
      |
     实现
      |
org.apache.catalina.connector.RequestFacade 类，由 Tomcat 提供，若是其他容器则不一样
</code></pre></div><p>以上体系Response也适用</p> <h3 id="获取请求消息数据"><a href="#获取请求消息数据" class="header-anchor">#</a> 获取请求消息数据</h3> <ul><li><p>获取<strong>请求行</strong>数据：如<code>GET /day14/login?name=zhangsan HTTP/1.1</code></p> <ul><li>获取请求方式：<code>String getMethod()</code>，如<code>GET</code> 。HttpServlet已经在内部使用了，以后用不到</li> <li>获取<strong>请求URL</strong>：<code>StringBuffer getRequestURL()</code>，如<code>http://localhost/day14/login/a.html</code>。<strong>统一资源定位符</strong></li> <li>获取<strong>请求URI</strong>：<code>String getRequestURI()</code>，如<code>/day14/login</code>。<strong>统一资源标识符</strong>，它<strong>包括URL</strong></li> <li>获取<strong>虚拟目录</strong>：<code>String getContextPath()</code>，如<code>/day14</code></li> <li>获取Servlet路径：<code>String getServletPath()</code>，如<code>/login</code></li> <li>获取get方式请求参数：<code>String getQueryString()</code>，如<code>name=zhangsan</code>，以后用不到</li> <li>获取协议及版本：<code>String getProtocol()</code>，如<code>HTTP/1.1</code></li> <li>获取客户机的<strong>IP地址</strong>：<code>String getRemoteAddr()</code></li></ul></li> <li><p>获取<strong>请求头</strong>数据</p> <ul><li>通过<strong>请求头的名称获取请求头的值</strong>：<code>String getHeader(String name)</code>，不区分大小写。如User-Agent、Referer</li> <li>获取所有的请求头名称：<code>Enumeration&lt;String&gt; getHeaderNames()</code>：</li></ul></li> <li><p>获取<strong>请求体</strong>数据（只有POST请求方式，才有请求体，在请求体中封装了POST请求的请求参数）。步骤：</p> <ol><li><p><strong>获取流对象</strong></p> <ul><li><p><code>BufferedReader getReader()</code>：获取<strong>字符输入流</strong>，只能操作字符数据</p></li> <li><p><code>ServletInputStream getInputStream()</code>：获取<strong>字节输入流</strong>，可以操作所有类型数据。继承了InputStream。在<strong>文件上传</strong>知识点后讲解</p></li></ul></li> <li><p><strong>再从流对象中拿数据</strong></p></li></ol></li></ul> <h3 id="获取请求参数通用方式"><a href="#获取请求参数通用方式" class="header-anchor">#</a> 获取<strong>请求参数通用方</strong>式</h3> <ul><li><p>获取<strong>请求参数通用方</strong>式（不论get还是post请求方式都可以使用）</p> <ul><li><p><strong><code>String getParameter(String name)</code></strong>：==根据<strong>参数名称获取参数值</strong>==    username=zs&amp;password=123</p></li> <li><p><code>String[] getParameterValues(String name)</code>：根据参数名称获取参数值的<strong>数组</strong> hobby=xx&amp;hobby=game</p></li> <li><p><strong><code>Map&lt;String,String[]&gt; getParameterMap()</code></strong>：==获取<strong>所有参数的map集合</strong>==</p></li> <li><p><code>Enumeration&lt;String&gt; getParameterNames()</code>：获取所有请求的参数名称</p></li> <li><p><strong>中文乱码问题</strong>：</p> <ul><li>GET方式：Tomcat 8及以上版本已经将get方式乱码问题解决了</li> <li>POST方式：会乱码。在获取参数前，<strong>设置request的编码<code>request.setCharacterEncoding(&quot;utf-8&quot;);</code></strong></li></ul></li> <li><p>获取的<strong>参数封装为JavaBean</strong>可以利用 Spring 或其他提供的 BeanUtils 工具类，<strong>简化数据封装</strong></p> <ul><li><p>JavaBean：标准的Java类，功能为封装数据。要求如下：</p> <ol><li><strong>类</strong>必须被<strong>public</strong>修饰</li> <li>必须提供<strong>公有的空参的构造器</strong></li> <li>属性一般使用private修饰</li> <li>对属性提供<strong>公共get(或is)和set方法</strong>，若只有get方法或set方法，那么这个属性是只读或只写属性！
<ul><li><strong>属性</strong>：<strong>setter和getter方法截取后的产物，与成员变量名无关</strong>。getName() --&gt; Name--&gt; name</li></ul></li></ol></li> <li><p>方法</p> <ul><li><p><code>setProperty(Object bean, String propName)</code></p></li> <li><p><code>getProperty(Object bean,String propName,String propValue)</code>：操作的是<strong>属性</strong></p></li> <li><p><strong><code>populate(Object obj , Map map)</code></strong>：将<strong>map</strong>集合的键值对信息，封装到对应的<strong>JavaBean</strong>对象中</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> map <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//populate需要try...catch。spring的beanutils可能不一样</span>
</code></pre></div></li></ul></li></ul></li></ul></li></ul> <h3 id="请求转发"><a href="#请求转发" class="header-anchor">#</a> 请求转发</h3> <ul><li><p><strong>请求转发</strong>：一种在服务器<strong>内部</strong>的资源跳转方式</p> <ul><li><p>步骤：</p> <ol><li><p><strong>request获取请求转发器对象</strong>：<strong><code>RequestDispatcher getRequestDispatcher(String path)</code></strong>，<strong>Servlet路径</strong></p></li> <li><p>使用RequestDispatcher对象来进行<strong>转发</strong>：<code>forward(ServletRequest request, ServletResponse response)</code></p> <ul><li><p>请求包含：<code>include(request,response)</code></p> <blockquote><p>请求转发：由下一个Servlet完成响应体！当前Servlet可以设置响应头！（<span style="font-family:monaco;color:red;font-weight:bold;">留头不留体</span>）
请求包含：由两个Servlet共同未完成响应体！（<span style="font-family:monaco;color:red;font-weight:bold;">都留</span>）</p></blockquote></li></ul></li></ol></li> <li><p>特点：</p> <ol><li>浏览器<strong>地址栏路径不发生变化</strong></li> <li>转发是<strong>一次请求一次响应</strong>，使用同一个request和response！</li> <li>只能转发到<strong>当前服务器内部资源</strong>中。</li></ol></li></ul></li></ul> <h3 id="request域"><a href="#request域" class="header-anchor">#</a> request域</h3> <ul><li>域对象：一个有作用范围的对象，可以在范围内共享数据</li> <li><strong>request域</strong>：代表<strong>一次请求的范围</strong>，一般用于<strong>请求转发</strong>的多个资源中<strong>共享数据</strong> <ul><li>方法：
<ol><li><strong><code>void setAttribute(String name,Object obj)</code></strong>：存储数据</li> <li><strong><code>Object getAttitude(String name)</code></strong>：通过键获取值</li> <li><strong><code>void removeAttribute(String name)</code></strong>：通过键移除键值对</li></ol></li></ul></li></ul> <h3 id="用户登录案例需求"><a href="#用户登录案例需求" class="header-anchor">#</a> 用户登录案例需求</h3> <ul><li><p>编写login.html登录页面：username &amp; password 两个输入框</p> <p>login.html中form表单的action路径的写法：<strong>虚拟目录+Servlet的资源路径</strong></p></li> <li><p>使用Druid数据库连接池技术,操作mysql，day14数据库中user表</p></li> <li><p>使用JdbcTemplate技术封装JDBC</p></li> <li><p>登录成功跳转到SuccessServlet展示：登录成功！用户名,欢迎您</p></li> <li><p>登录失败跳转到FailServlet展示：登录失败，用户名或密码错误</p></li></ul> <h2 id="response"><a href="#response" class="header-anchor">#</a> Response</h2> <h3 id="response继承体系"><a href="#response继承体系" class="header-anchor">#</a> Response继承体系</h3> <p>​	<code>ServletResponse</code>           —— 接口
​		|	继承
​	<code>HttpServletResponse</code>	  —— 接口
​		|	实现
​	<code>org.apache.catalina.connector.ResponseFacade</code>  ——类  (Tomcat编写的)</p> <h3 id="设置响应行中状态码"><a href="#设置响应行中状态码" class="header-anchor">#</a> 设置响应行中状态码</h3> <ul><li><strong><span style="background:yellow;">setStatus(int sc)</span></strong> --&gt; <strong>设置此响应的状态码</strong>，可以用来发送302、200或者404、500等
<ul><li>sendError(int sc [,String msg]) --&gt; 发送错误状态码，还可以带一个错误信息！</li></ul></li></ul> <h3 id="设置响应头"><a href="#设置响应头" class="header-anchor">#</a> 设置响应头</h3> <p>头就是一个<strong>键值对</strong>！可能会存在一个头（一个名称，一个值），也可能会存在一个头（一个名称，多个值！）</p> <ul><li><p><strong><span style="background:yellow;">setHeader(String n, String val)</span></strong>：适用于<span style="background:yellow;"><strong>单值</strong></span>的响应头，例如：response.setHeader(&quot;aaa&quot;, &quot;AAA&quot;)</p> <ul><li><p>addHeader(String name, String value)：适用于多值的响应头，为每个值分别调用</p></li> <li><p><code>&lt;meta&gt;</code><strong>标签代替响应头</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/html; charset=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li> <li><p><strong>Refresh案例</strong>（3秒后跳转至另一个页面）也可以理解为定时重定向</p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;after 3s ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//url也可以改为www.baidu.com，若不设置这个参数，就跳转至当前页面</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Refresh&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3,url='DServlet'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>禁用浏览器缓存</strong>(Cache-Control、pragma、expires)</p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Cache-Control&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Pragma&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//编译指示</span>
response<span class="token punctuation">.</span><span class="token function">setDateHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Expires&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//失效时间</span>
</code></pre></div></li></ul> <h3 id="设置响应体"><a href="#设置响应体" class="header-anchor">#</a> 设置响应体</h3> <blockquote><p>response的两个流，用来向客户端发送数据（不能同时使用，否则抛<strong>IllegalStateException</strong>异常）</p></blockquote> <ul><li><p><strong>ServletOutputStream（字节输出流）：<code>resopnse.getOutputStream()</code></strong></p></li> <li><p><strong>PrintWriter（字符输出流，需要设置编码）：<code>response.getWriter()</code></strong>，不需要刷新缓冲区</p></li></ul> <h3 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h3> <ul><li><p><strong>重定向</strong>：<strong>资源跳转的方式</strong></p></li> <li><p>设置<strong>状态码</strong>为302，设置<strong>响应头</strong><code>Location</code></p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/day15/responseDemo2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>简单的重定向方法：<strong><code>response.sendRedirect()</code></strong></p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/day15/responseDemo2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>forward和redirect的区别</strong></p> <ul><li>转发的特点：forward
<ol><li><strong>地址栏路径不变</strong></li> <li>转发是<strong>一次请求</strong>，可以<strong>使用request域</strong>来共享数据</li> <li>转发只能<strong>访问当前服务器下的资源</strong></li></ol></li> <li>重定向的特点：redirect
<ol><li><strong>地址栏</strong>发生<strong>变</strong>化</li> <li>重定向是<strong>两次请求</strong>。<strong>不能使用request域</strong>来共享数据</li> <li>重定向<strong>可以访问其他站点</strong>(服务器)的资源</li></ol></li></ul></li></ul> <h3 id="路径的写法"><a href="#路径的写法" class="header-anchor">#</a> 路径的写法</h3> <ul><li><strong>相对路径</strong>：通过相对路径不可以确定唯一资源，以**<code>./</code>开头（或不写它）的路径**。如：<code>./index.html</code> <ul><li>规则：找到当前资源所属目录和目标资源所属目录之间的相对位置关系。<code>./</code>：当前目录；<code>../</code>:后退一级目录</li></ul></li> <li><strong>绝对路径</strong>：通过绝对路径可以确定唯一资源，以**<code>/</code>开头的路径**。如：<code>/day15/responseDemo2</code> <ul><li>规则：判断定义的路径是<strong>给谁用</strong>的？<strong>判断将来请求从哪儿发出</strong> <ul><li><strong>给客户端浏览器使用</strong>：需要<strong>加虚拟目录</strong>(项目的访问路径)，建议<strong>动态获取：<code>request.getContextPath()</code></strong> <ul><li><code>&lt;a&gt;</code>，<code>&lt;form&gt;</code>，<code>redirect路径</code>。。。</li></ul></li> <li><strong>给服务器使用</strong>：<strong>不需要加虚拟目录</strong> <ul><li><code>forward路径</code></li></ul></li></ul></li></ul></li></ul> <h3 id="输出字符数据到浏览器—乱码"><a href="#输出字符数据到浏览器—乱码" class="header-anchor">#</a> 输出字符数据到浏览器—乱码</h3> <p>由于浏览器默认使用 GBK 或 GB2312 或 UTF-8，而服务器获取的<strong>流</strong>默认使用 ISO8859-1（应该是使用的 Servlet 容器如 Tomcat 设置的），不支持中文。且编码解码不同，必乱码。</p> <p>可通过如下代码查到服务器获取的<strong>流</strong>的编码</p> <div class="language-java extra-class"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如何解决中文乱码呢？</p> <p><strong>获取字符输出流之前</strong>设置该<strong>流的默认编码</strong>，告诉浏览器<strong>响应体使用的编码</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ISO-8859-1</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// null</span>

<span class="token comment">// response.setCharacterEncoding(&quot;UTF-8&quot;);</span>

<span class="token comment">// 设置 setContentType 后会自动设置 CharacterEncoding</span>
<span class="token comment">// response.setHeader(&quot;Content-type&quot;,&quot;text/html;charset=utf-8&quot;);// setHeader 封装后的方法如下</span>
response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 纯文本也可以设置为 text/plain;charset=utf-8</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// UTF-8</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// application/json;charset=utf-8</span>
</code></pre></div><h3 id="输出字节数据到浏览器"><a href="#输出字节数据到浏览器" class="header-anchor">#</a> 输出字节数据到浏览器</h3> <ul><li><code>getBytes()</code>，获取字节输出流外，其他和输出字符数据没什么区别</li></ul> <h3 id="验证码案例"><a href="#验证码案例" class="header-anchor">#</a> 验证码案例</h3> <blockquote><p>本质：图片
目的：<strong>防止恶意表单注册</strong></p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//1.创建验证码图片对象</span>
<span class="token class-name">BufferedImage</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token class-name">BufferedImage</span><span class="token punctuation">.</span>TYPE_INT_RGB<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.美化图片</span>
<span class="token comment">//2.1 填充背景色</span>
<span class="token class-name">Graphics</span> g <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getGraphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//画笔对象</span>
g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>PINK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置画笔颜色</span>
g<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.2画边框</span>
g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>BLUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>width <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>height <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghigklmnopqrstuvwxyz0123456789&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//生成随机角标</span>
<span class="token class-name">Random</span> ran <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> ran<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//随机字符</span>
    g<span class="token punctuation">.</span><span class="token function">drawString</span><span class="token punctuation">(</span>ch<span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>width<span class="token operator">/</span><span class="token number">5</span><span class="token operator">*</span>i<span class="token punctuation">,</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//写验证码</span>
<span class="token punctuation">}</span>

<span class="token comment">//2.4画干扰线</span>
g<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>GREEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//随机生成坐标点</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> x1 <span class="token operator">=</span> ran<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> x2 <span class="token operator">=</span> ran<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> y1 <span class="token operator">=</span> ran<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> y2 <span class="token operator">=</span> ran<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    g<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//3.将图片输出到页面展示</span>
<span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span><span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span>response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//点击图片更换下一张</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;verifyCode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//加时间戳的毫秒值</span>
    <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;/day15/checkCodeServlet?&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="url编码"><a href="#url编码" class="header-anchor">#</a> URL编码</h2> <ul><li><p>表单的类型：Content-Type: application/x-www-form-urlencoded，就是把中文转换成%后面跟两位的16进制</p> <p>为什么要用它：在客户端和服务器之间传递中文时需要把它转换成网络适合的方式</p></li> <li><p><strong>它不是字符编码</strong>，它是用来在客户端与服务器之间传递参数用的一种方式</p></li> <li><p>URL编码需要先指定一种字符编码，把<strong>字符串解码后，得到byte[]，然后把小于0的字节+256，再转换成16进制。前面再添加一个%</strong></p></li> <li><p><strong>POST</strong>请求默认就使用URL编码！tomcat会自动使用URL解码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//URL编码：</span>
<span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//URL解码：</span>
</code></pre></div><p>最后我们需要把链接中的中文参数，使用url来编码！学了jsp就可以</p></li></ul> <h2 id="文件下载案例"><a href="#文件下载案例" class="header-anchor">#</a> 文件下载案例</h2> <ul><li><p>文件下载需求：</p> <ol><li>页面显示超链接</li> <li>点击超链接后弹出下载提示框</li> <li>完成图片文件下载</li></ol></li> <li><p>分析：</p> <ol><li>超链接指向的资源如果能够被浏览器解析，则在浏览器中展示，如果不能解析，则弹出下载提示框。不满足需求</li> <li>要求任何资源都必须弹出下载提示框</li> <li>使用响应头设置资源的打开方式：<code>content-disposition:attachment;filename=xxx</code></li></ol></li> <li><p>步骤：</p> <ol><li>定义页面，编辑超链接href属性，指向Servlet，<strong>传递资源名称<code>?filename=xxx</code></strong></li> <li>定义Servlet</li> <li>获取文件名称</li> <li>使用字节输入流加载文件进内存</li> <li>指定response的响应头： <code>content-disposition:attachment;filename=xxx</code></li> <li>将数据写出到response输出流</li></ol></li> <li><p>中文文件名问题</p> <ul><li>解决思路：
<ol><li>获取客户端使用的浏览器版本信息</li> <li>根据不同的版本信息，设置filename的编码方式不同</li></ol></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//1.获取请求参数，文件名称</span>
<span class="token class-name">String</span> filename <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;filename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.使用字节输入流加载文件进内存</span>
<span class="token comment">//2.1找到文件服务器路径</span>
<span class="token class-name">String</span> realPath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/img/&quot;</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.2用字节流关联</span>
<span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.设置response的响应头</span>
<span class="token comment">//3.1设置响应头类型：content-type</span>
<span class="token class-name">String</span> mimeType <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getMimeType</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取文件的mime类型</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span>mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.2设置响应头打开方式:content-disposition</span>

<span class="token comment">//解决中文文件名问题</span>
<span class="token comment">//1.获取user-agent请求头、</span>
<span class="token class-name">String</span> agent <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;user-agent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.使用工具类方法编码文件名即可</span>
filename <span class="token operator">=</span> <span class="token class-name">DownLoadUtils</span><span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span>agent<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-disposition&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;attachment;filename=&quot;</span><span class="token operator">+</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4.将输入流的数据写出到输出流中</span>
<span class="token class-name">ServletOutputStream</span> sos <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/apple54whn/notes/edit/master/docs/Java/Jakarta EE/0 Servlet.md" target="_blank" rel="noopener noreferrer">编辑文档！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">8/24/2020, 1:23:33 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Java/Jakarta EE/1 Filter.html">1 Filter</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.4c2406b8.js" defer></script><script src="/assets/js/2.4ce794f3.js" defer></script><script src="/assets/js/157.fd08fd72.js" defer></script><script src="/assets/js/33.9b523a1b.js" defer></script>
  </body>
</html>
