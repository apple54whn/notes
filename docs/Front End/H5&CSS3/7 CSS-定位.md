# Position 定位

## 为什么需要定位

以下情况使用标准流或者浮动能实现吗？

* 某个元素可以**自由的在一个盒子内移动位置**，并且压住其他盒子
* 当我们滚动窗口的时候，盒子是**固定屏幕某个位置**的。

以上效果，标准流或浮动都无法快速实现，此时需要定位来实现。

* 浮动可以让多个块级盒子一行没有缝隙排列显示， 经常用于横向排列盒子。
* 定位则是可以让盒子自由的在**某个盒子内移动**位置或者**固定屏幕中某个位置**，并且可以压住其他盒子。
* 且**内联inline元素不能使用定位，需转换为block元素**🔥



## 定位组成

* 定位：将盒子定在某一个位置，所以定位也是在摆放盒子，按照定位的方式移动盒子。
* **定位 = 定位模式 + 边偏移**
* **定位模式**决定元素的**定位方式** ，它通过 CSS 的 position 属性来设置



## `static`

默认值，静态定位，元素出现在**标准流**中（忽略 top, bottom, left, right 或者 z-index 声明，即**没有边偏移**）很少用到。



## `relative`🔥

**相对定位**，**相对于其自己原来位置进行定位**。

**没有脱标**。**原来在标准流的位置继续占有**，后面的盒子仍**以标准流的方式对待它，不能使用该位置**。且**不影响其他元素布局即新的位置不会占用其他元素空间**。

最典型的应用是**给绝对定位当爹的（限制绝对定位）**，以及对**元素位置进行微调**。



### 首页大图案例

*   显示大图主内容（居中）
*   不能出现x轴滚动条
*   所以img需要向左移动：(img-box)/2，化简为-img/2 + box/2

```css
.box {
  /* 设置最小宽度 */
  min-width: 1000px;
  /* 隐藏多余的 */
  overflow: hidden;
}
.box img {
	/* 向左移动img一半 */
  position: relative;
  
  /* 硬编码不好，但是不能写%，因为此处%是相对于包含块即父元素，而我们需要的是相对于元素本身 */
  /* left: -960px; */
  transform: translate(-50%);
  
  /* 向右移动父元素的一半，使用百分数可以根据视窗灵活调整 */
  margin-left: 50%;
}
```





## `absolute`🔥

**绝对定位，相对于非 static 定位的第一个父元素进行定位**。最终还没找到，则相对于浏览器视口即 viewport 来定位。

**脱标**。**不再占有原先的位置**，其他盒子可以使用原先位置。



### 子绝父相的由来

*   在绝大多数情况下，子元素的绝对定位都是相对于父元素，好参考
*   如果希望**子元素相对父元素进行定位**，又**不希望父元素脱标！**常用解决方案就是**子绝父相**
    *   **子级绝对定位，不会占有位置**，可以放到父盒子里面的任何一个地方，不会影响其他的兄弟盒子。
    *   **父盒子需要加定位限制子盒子在父盒子内显示**。
    *   **父盒子布局时，需要占有位置**，因此父亲只能是相对定位（其他float等也不行）。

*   当然，子绝父相**不是永远不变的**，如果父元素不需要占有位置，子绝父绝也会遇到。



### 绝对定位的公式应用

绝对定位元素：position 为 absolute 或 fixed 的元素。对于绝对定位元素来说：

定位参照对象（父）的宽度 = left + right + margin-left + margin-right + 绝对定位元素的实际占用宽度

定位参照对象（父）的高度 = top + bottom + margin-top + margin-bottom + 绝对定位元素的实际占用高度

*   margin-left 和 margin-right 默认为 0
*   left 和 right 默认为 auto。**浏览器默认不会给等分！**

所以：

*   若希望**绝对定位元素的宽高和定位参考对象一样**，可以给绝对定位元素设置如下属性

    若只是宽或高一样，可以根据需要修改

    ```css
    div {
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      margin: 0;
    }
    ```

*   若希望**绝对定位元素在定位参考对象中居中（垂直水平）显示**，可以给绝对定位元素设置如下属性

    若只是水平或垂直居中，可根据需要修改

    ```css
    div {
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      margin: auto;
    }
    ```

*   当然也可以使用`transform`实现



## `fixed`🔥

**固定定位**，**相对于浏览器视口即 viewport 进行定位**，跟父元素没有任何关系。可以看做是一种特殊的绝对定位。即使画布滚动元素位置也不会改变。

**脱标**。**不再占有原先的位置**。

右侧固定按键案例：

*   先不使用固定定位
*   当画布移动到某个位置时，添加固定定位







## `sticky`🔥

**粘性定位**可以被认为是**相对定位relative**和**固定定位fixed**的混合

以浏览器的**可视窗口为参照点**移动元素（固定定位特点）

粘性定位**占有原先的位置**（相对定位特点）

**必须添加** top 、left、right、bottom 其中一个才有效

> **跟页面滚动搭配使用**。 兼容性较差，IE 不支持，目前大部分使用 js 实现



## `inherit`

规定应该从父元素继承 position 属性的值。

|     定位模式      | 是否脱标          | 移动位置           | 是否常用   |
| :---------------: | ----------------- | ------------------ | ---------- |
|  static 静态定位  | 否                | 不能使用边偏移     | 很少       |
| relative 相对定位 | 否 (占有原来位置) | 相对于自身位置移动 | 常用       |
| absolute绝对定位  | 是                | 带有定位的父级     | 常用       |
|  fixed 固定定位   | 是                | 浏览器可视区       | 常用       |
|  sticky 粘性定位  | 否 (占有原来位置) | 浏览器可视区       | 当前阶段少 |



## 边偏移

**边偏移**就是**定位的元素**移动到**最终位置**，非定位元素使用无效

| 属性           | 描述                                                         |
| :------------- | :----------------------------------------------------------- |
| **top**        | 定义了一个定位元素的上外边距边界与其包含块上边界之间的偏移。 |
| **right**      | 定义了定位元素右外边距边界与其包含块右边界之间的偏移。       |
| **bottom**     | 定义了定位元素下外边距边界与其包含块下边界之间的偏移。       |
| **left**       | 定义了定位元素左外边距边界与其包含块左边界之间的偏移。       |
| overflow       | 设置当元素的内容溢出其区域时发生的事情。                     |
| clip           | 设置元素的形状。元素被剪入这个形状之中，然后显示出来。       |
| vertical-align | 设置元素的垂直对齐方式。                                     |
| **z-index**    | 设置元素的堆叠顺序，z轴距离，默认为auto，可负数，数字后面**不能加单位**。**定位盒子才有该属性**，如果属性值相同，则按照HTML元素的书写顺序，后来居上。 |

> 若一个盒子既有left也有right，则left优先级高；同理top比bottom优先级高



### `z-index` 元素的层叠

*   父子关系

    子元素会层叠在父元素上

*   非父子关系

    *   都是非定位元素（即 static）：在标准流中一般不存在层叠现象
    *   1个是定位、1个是非定位：定位元素会层叠在非定位元素上
    *   都是**定位元素**：默认后写的HTML元素层叠在先写的上面，可以使用`z-index`来控制







## 脱离标准流元素特点—重复 🔥

*   可以设置`width`、`height`
*   默认`width`、`height`由内容决定
*   不再给父元素汇报`width`、`height`数据，即父元素也不知道该元素了
*   类似`inline-block`，但是不是！是`block`！

::: tip 注意

display、position、float 都都影响盒子的生成和布局：

*   当 display 为 none 时，就不会生成盒子，对 position 和 float 无影响
*   当 postion 为 absolute 或 fixed时，或 float 为 left 或 right 时，元素基本都变为block类型（除了布局类型）详细参考文档

:::





## 定位和浮动

* **绝对定位（固定定位）会压住下面标准流所有的内容**

    浮动元素不同，只会压住它下面标准流的盒子，但是**不会压住下面标准流盒子里面的文字（图片）**

    浮动之所以不会压住文字，因为浮动产生的目的最初是为了做文字环绕效果的。 文字会围绕浮动元素





## 案例

### 考拉





