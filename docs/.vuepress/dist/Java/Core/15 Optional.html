<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>15 Optional | Conanan&#39;s Notes</title>
    <meta name="description" content="Good Good Study, Day Day Up!">
    
    
    <link rel="preload" href="/assets/css/0.styles.5d7a53ce.css" as="style"><link rel="preload" href="/assets/js/app.11b86352.js" as="script"><link rel="preload" href="/assets/js/2.dc2cb52a.js" as="script"><link rel="preload" href="/assets/js/21.0ca18de8.js" as="script"><link rel="prefetch" href="/assets/js/10.7ed53a9f.js"><link rel="prefetch" href="/assets/js/11.85d70dc7.js"><link rel="prefetch" href="/assets/js/12.6ca0a4c7.js"><link rel="prefetch" href="/assets/js/13.b66f44be.js"><link rel="prefetch" href="/assets/js/14.f7d36314.js"><link rel="prefetch" href="/assets/js/15.c9169b45.js"><link rel="prefetch" href="/assets/js/16.b3affa03.js"><link rel="prefetch" href="/assets/js/17.24a97ffb.js"><link rel="prefetch" href="/assets/js/18.f19a0f23.js"><link rel="prefetch" href="/assets/js/19.ccd87043.js"><link rel="prefetch" href="/assets/js/20.81aafd3b.js"><link rel="prefetch" href="/assets/js/22.2ce051e4.js"><link rel="prefetch" href="/assets/js/23.e2addba7.js"><link rel="prefetch" href="/assets/js/24.10dbecb4.js"><link rel="prefetch" href="/assets/js/25.8641a27b.js"><link rel="prefetch" href="/assets/js/26.e5fad68f.js"><link rel="prefetch" href="/assets/js/27.07d175e0.js"><link rel="prefetch" href="/assets/js/3.4d99fa19.js"><link rel="prefetch" href="/assets/js/4.4809e9ae.js"><link rel="prefetch" href="/assets/js/5.9f00f578.js"><link rel="prefetch" href="/assets/js/6.3ac5cf54.js"><link rel="prefetch" href="/assets/js/7.d18e475f.js"><link rel="prefetch" href="/assets/js/8.73262d74.js"><link rel="prefetch" href="/assets/js/9.1d245c90.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7a53ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Conanan's Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/1 Basic Syntax.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Framwork/1 Spring.html" class="nav-link">Framwork</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages2" class="dropdown-title"><span class="title">Languages2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Group1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li><li class="dropdown-item"><h4>Group2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/1 Basic Syntax.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Framwork/1 Spring.html" class="nav-link">Framwork</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages2" class="dropdown-title"><span class="title">Languages2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Group1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li><li class="dropdown-item"><h4>Group2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Core</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java/Core/0 Basic.html" class="sidebar-link">0 Basic</a></li><li><a href="/Java/Core/1 Basic Syntax.html" class="sidebar-link">1 Basic Syntax</a></li><li><a href="/Java/Core/2 Object Orientation.html" class="sidebar-link">2 Object Orientation</a></li><li><a href="/Java/Core/3 Error &amp; Exception.html" class="sidebar-link">3 Error &amp; Exception</a></li><li><a href="/Java/Core/4 API.html" class="sidebar-link">4 API</a></li><li><a href="/Java/Core/5 Generic.html" class="sidebar-link">5 Generic</a></li><li><a href="/Java/Core/6 Container.html" class="sidebar-link">6 Container</a></li><li><a href="/Java/Core/7 Thread.html" class="sidebar-link">7 Thread</a></li><li><a href="/Java/Core/7 Thread2.html" class="sidebar-link">7 Thread2</a></li><li><a href="/Java/Core/8 IO.html" class="sidebar-link">8 IO</a></li><li><a href="/Java/Core/9 NIO.html" class="sidebar-link">9 NIO（暂时未完成）</a></li><li><a href="/Java/Core/10 AIO.html" class="sidebar-link">10 AIO（暂时未完成）</a></li><li><a href="/Java/Core/11 Network.html" class="sidebar-link">11 Network</a></li><li><a href="/Java/Core/12 Reflect.html" class="sidebar-link">12 Reflect—java.lang.reflect</a></li><li><a href="/Java/Core/13 Lambda.html" class="sidebar-link">13 Lambda</a></li><li><a href="/Java/Core/14 Stream API.html" class="sidebar-link">14 Stream API</a></li><li><a href="/Java/Core/15 Optional.html" class="active sidebar-link">15 Optional</a></li><li><a href="/Java/Core/16 Test.html" class="sidebar-link">16 Test</a></li><li><a href="/Java/Core/17 设计原则&amp;设计模式.html" class="sidebar-link">17 设计原则及设计模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Code</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_15-optional"><a href="#_15-optional" class="header-anchor">#</a> 15 Optional</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_15-optional">15 Optional</a></li></ul></div><p></p> <p>到目前为止，臭名昭著的空指针异常是导致Java应用程序失败的最常见原因。 以前，为了解决空指针异常，Google公司著名的Guava项目引入了<code>Optional</code>类， Guava通过使用检查空值的方式来防止代码污染，它鼓励程序员写更干净的代 码。受到Google Guava的启发，<code>Optional</code>类已经成为Java 8类库的一部分。</p> <ul><li><code>java.util.Optional&lt;T&gt;</code> 是一个容器类，它可以保存类型T的值，代表这个值存在。或者仅仅保存null，表示这个值不存在。原来用 null 表示一个值不存在，现在 <code>Optional</code> 可以更好的表达这个概念。并且可以避免空指针异常。</li> <li><code>Optional</code>类的Javadoc描述如下:这是一个可以为<code>null</code>的容器对象。如果值存在 则<code>isPresent()</code>方法会返回<code>true</code>，调用<code>get()</code>方法会返回该对象。</li></ul> <p><strong>创建<code>Optional</code>类对象的方法</strong></p> <ul><li><p><code>Optional.of(T t)</code></p> <p>创建一个 <code>Optional</code> 实例，<code>t</code>必须<strong>非空</strong>;</p></li> <li><p><code>Optional.ofNullable(T t)</code></p> <p><code>t</code>可以为<code>null</code></p></li> <li><p><code>Optional.empty()</code></p> <p>创建一个空的 <code>Optional</code> 实例</p></li></ul> <p><strong>判断<code>Optional</code>容器中是否包含对象</strong></p> <ul><li><p><code>boolean isPresent()</code></p> <p>判断是否包含对象</p></li> <li><p><code>void ifPresent(Consumer&lt;? super T&gt; consumer)</code></p> <p>如果有值，就执行Consumer接口的实现代码，并且该值会作为参数传给它。</p></li></ul> <p><strong>获取<code>Optional</code>容器的对象</strong></p> <ul><li><p><code>T get()</code></p> <p>如果调用对象包含值，返回该值，否则抛异常</p></li> <li><p><code>T orElse(T other)</code></p> <p>如果有值则将其返回，否则返回指定的other对象。</p></li> <li><p><code>T orElseGet(Supplier&lt;? extends T&gt; other)</code></p> <p>如果有值则将其返回，否则返回由<code>Supplier</code>接口实现提供的对象。</p></li> <li><p><code>T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code></p> <p>如果有值则将其返回，否则抛出由<code>Supplier</code>接口实现提供的异常。</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Girl</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  
  <span class="token keyword">public</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Girl{&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
      <span class="token string">'}'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// -------------------------------</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Boy</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">Girl</span> girl<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token class-name">Girl</span> girl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>girl <span class="token operator">=</span> girl<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">Girl</span> <span class="token function">getGirl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> girl<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGirl</span><span class="token punctuation">(</span><span class="token class-name">Girl</span> girl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>girl <span class="token operator">=</span> girl<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Boy{&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;girl=&quot;</span> <span class="token operator">+</span> girl <span class="token operator">+</span>
      <span class="token string">'}'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Girl</span> girl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// girl = null;</span>
  
  <span class="token comment">//of(T t):保证t是非空的，对于 null 执行会报 NPE </span>
  <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Girl</span><span class="token punctuation">&gt;</span></span> optionalGirl <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>girl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">//ofNullable(T t)：t可以为null，执行输出为Optional.empty</span>
  <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Girl</span><span class="token punctuation">&gt;</span></span> optionalGirl <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>girl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optionalGirl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">//orElse(T t1):如果当前的Optional内部封装的t是非空的，则返回内部的t；如果内部的t是空的，则返回orElse()方法中的参数t1.</span>
  <span class="token class-name">Girl</span> girl1 <span class="token operator">=</span> optionalGirl<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token string">&quot;赵丽颖&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>girl1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// --------------没有 Optional 时--------------------</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Boy</span> boy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  boy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> girlName <span class="token operator">=</span> <span class="token function">getGirlName</span><span class="token punctuation">(</span>boy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>girlName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">//优化之前的getGirlName():</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGirlName</span><span class="token punctuation">(</span><span class="token class-name">Boy</span> boy<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> boy<span class="token punctuation">.</span><span class="token function">getGirl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//优化以后的getGirlName():</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGirlName1</span><span class="token punctuation">(</span><span class="token class-name">Boy</span> boy<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>boy <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Girl</span> girl <span class="token operator">=</span> boy<span class="token punctuation">.</span><span class="token function">getGirl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>girl <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> girl<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// -----------有 Optional 时------------</span>

<span class="token comment">//使用Optional类的getGirlName():</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGirlName2</span><span class="token punctuation">(</span><span class="token class-name">Boy</span> boy<span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boy</span><span class="token punctuation">&gt;</span></span> boyOptional <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>boy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//此时的boy1一定非空</span>
  <span class="token class-name">Boy</span> boy1 <span class="token operator">=</span> boyOptional<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token string">&quot;迪丽热巴&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">Girl</span> girl <span class="token operator">=</span> boy1<span class="token punctuation">.</span><span class="token function">getGirl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 实际中不会多写如下一层</span>
  <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Girl</span><span class="token punctuation">&gt;</span></span> girlOptional <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>girl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//girl1一定非空</span>
  <span class="token class-name">Girl</span> girl1 <span class="token operator">=</span> girlOptional<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token string">&quot;古力娜扎&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> girl1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Boy</span> boy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  boy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  boy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Girl</span><span class="token punctuation">(</span><span class="token string">&quot;苍老师&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> girlName <span class="token operator">=</span> <span class="token function">getGirlName2</span><span class="token punctuation">(</span>boy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>girlName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">11/10/2019, 1:13:27 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Java/Core/14 Stream API.html" class="prev">14 Stream API</a></span> <span class="next"><a href="/Java/Core/16 Test.html">16 Test</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.11b86352.js" defer></script><script src="/assets/js/2.dc2cb52a.js" defer></script><script src="/assets/js/21.0ca18de8.js" defer></script>
  </body>
</html>
