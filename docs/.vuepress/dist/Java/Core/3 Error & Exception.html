<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3 Error &amp; Exception | Conanan&#39;s Notes</title>
    <meta name="description" content="Good Good Study, Day Day Up!">
    
    
    <link rel="preload" href="/assets/css/0.styles.5d7a53ce.css" as="style"><link rel="preload" href="/assets/js/app.11b86352.js" as="script"><link rel="preload" href="/assets/js/2.dc2cb52a.js" as="script"><link rel="preload" href="/assets/js/8.73262d74.js" as="script"><link rel="prefetch" href="/assets/js/10.7ed53a9f.js"><link rel="prefetch" href="/assets/js/11.85d70dc7.js"><link rel="prefetch" href="/assets/js/12.6ca0a4c7.js"><link rel="prefetch" href="/assets/js/13.b66f44be.js"><link rel="prefetch" href="/assets/js/14.f7d36314.js"><link rel="prefetch" href="/assets/js/15.c9169b45.js"><link rel="prefetch" href="/assets/js/16.b3affa03.js"><link rel="prefetch" href="/assets/js/17.24a97ffb.js"><link rel="prefetch" href="/assets/js/18.f19a0f23.js"><link rel="prefetch" href="/assets/js/19.ccd87043.js"><link rel="prefetch" href="/assets/js/20.81aafd3b.js"><link rel="prefetch" href="/assets/js/21.0ca18de8.js"><link rel="prefetch" href="/assets/js/22.2ce051e4.js"><link rel="prefetch" href="/assets/js/23.e2addba7.js"><link rel="prefetch" href="/assets/js/24.10dbecb4.js"><link rel="prefetch" href="/assets/js/25.8641a27b.js"><link rel="prefetch" href="/assets/js/26.e5fad68f.js"><link rel="prefetch" href="/assets/js/27.07d175e0.js"><link rel="prefetch" href="/assets/js/3.4d99fa19.js"><link rel="prefetch" href="/assets/js/4.4809e9ae.js"><link rel="prefetch" href="/assets/js/5.9f00f578.js"><link rel="prefetch" href="/assets/js/6.3ac5cf54.js"><link rel="prefetch" href="/assets/js/7.d18e475f.js"><link rel="prefetch" href="/assets/js/9.1d245c90.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7a53ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Conanan's Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/1 Basic Syntax.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Framwork/1 Spring.html" class="nav-link">Framwork</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages2" class="dropdown-title"><span class="title">Languages2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Group1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li><li class="dropdown-item"><h4>Group2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/1 Basic Syntax.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Framwork/1 Spring.html" class="nav-link">Framwork</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages2" class="dropdown-title"><span class="title">Languages2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Group1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li><li class="dropdown-item"><h4>Group2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Core</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java/Core/0 Basic.html" class="sidebar-link">0 Basic</a></li><li><a href="/Java/Core/1 Basic Syntax.html" class="sidebar-link">1 Basic Syntax</a></li><li><a href="/Java/Core/2 Object Orientation.html" class="sidebar-link">2 Object Orientation</a></li><li><a href="/Java/Core/3 Error &amp; Exception.html" class="active sidebar-link">3 Error &amp; Exception</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Core/3 Error &amp; Exception.html#_3-1-异常的体系" class="sidebar-link">3.1 异常的体系</a></li><li class="sidebar-sub-header"><a href="/Java/Core/3 Error &amp; Exception.html#_3-2-异常的分类" class="sidebar-link">3.2 异常的分类</a></li><li class="sidebar-sub-header"><a href="/Java/Core/3 Error &amp; Exception.html#_3-3-异常的处理" class="sidebar-link">3.3 异常的处理</a></li><li class="sidebar-sub-header"><a href="/Java/Core/3 Error &amp; Exception.html#_3-4-objects非空判断" class="sidebar-link">3.4 Objects非空判断</a></li><li class="sidebar-sub-header"><a href="/Java/Core/3 Error &amp; Exception.html#_3-5-自定义异常" class="sidebar-link">3.5 自定义异常</a></li><li class="sidebar-sub-header"><a href="/Java/Core/3 Error &amp; Exception.html#习题" class="sidebar-link">习题</a></li></ul></li><li><a href="/Java/Core/4 API.html" class="sidebar-link">4 API</a></li><li><a href="/Java/Core/5 Generic.html" class="sidebar-link">5 Generic</a></li><li><a href="/Java/Core/6 Container.html" class="sidebar-link">6 Container</a></li><li><a href="/Java/Core/7 Thread.html" class="sidebar-link">7 Thread</a></li><li><a href="/Java/Core/7 Thread2.html" class="sidebar-link">7 Thread2</a></li><li><a href="/Java/Core/8 IO.html" class="sidebar-link">8 IO</a></li><li><a href="/Java/Core/9 NIO.html" class="sidebar-link">9 NIO（暂时未完成）</a></li><li><a href="/Java/Core/10 AIO.html" class="sidebar-link">10 AIO（暂时未完成）</a></li><li><a href="/Java/Core/11 Network.html" class="sidebar-link">11 Network</a></li><li><a href="/Java/Core/12 Reflect.html" class="sidebar-link">12 Reflect—java.lang.reflect</a></li><li><a href="/Java/Core/13 Lambda.html" class="sidebar-link">13 Lambda</a></li><li><a href="/Java/Core/14 Stream API.html" class="sidebar-link">14 Stream API</a></li><li><a href="/Java/Core/15 Optional.html" class="sidebar-link">15 Optional</a></li><li><a href="/Java/Core/16 Test.html" class="sidebar-link">16 Test</a></li><li><a href="/Java/Core/17 设计原则&amp;设计模式.html" class="sidebar-link">17 设计原则及设计模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Code</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3-error-exception"><a href="#_3-error-exception" class="header-anchor">#</a> 3 Error &amp; Exception</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_3-error-exception">3 Error &amp; Exception</a><ul><li><a href="#_3-1-异常的体系">3.1 异常的体系</a></li><li><a href="#_3-2-异常的分类">3.2 异常的分类</a></li><li><a href="#_3-3-异常的处理">3.3 异常的处理</a><ul><li><a href="#_3-3-1-抓—捕获异常-try-catch-finally">3.3.1 抓—捕获异常 try-catch-finally</a></li><li><a href="#_3-3-2-抓—声明异常-throws">3.3.2 抓—声明异常 throws</a></li><li><a href="#_3-3-3-抛—抛出异常throw">3.3.3 抛—抛出异常throw</a></li><li><a href="#_3-3-6-子父类异常注意事项">3.3.6 子父类异常注意事项</a></li></ul></li><li><a href="#_3-4-objects非空判断">3.4 Objects非空判断</a></li><li><a href="#_3-5-自定义异常">3.5 自定义异常</a></li><li><a href="#习题">习题</a></li></ul></li></ul></div><p></p> <ul><li>程序执行中发生的不正常情况称为异常。</li></ul> <h2 id="_3-1-异常的体系"><a href="#_3-1-异常的体系" class="header-anchor">#</a> 3.1 异常的体系</h2> <ul><li><p>异常的根类是<code>java.lang.Throwable</code>，其下有两个子类：</p> <ul><li><p><code>java.lang.Error</code></p> <p><strong>JVM无法解决的严重问题</strong>。如:JVM系统内部错误、资源耗尽等严重情况。如栈stack、堆heap内存耗尽<strong>StackOverflowError（可能在递归时发生）<strong>和</strong>OutOfMemoryError（new了非常多对象）</strong>。一般不编写针对性的代码进行处理。</p></li> <li><p><code>java.lang.Exception</code></p> <p>其它因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码进行处理。</p></li></ul> <p><img src="/assets/img/Exception.a6023e62.png" alt=""></p></li> <li><p><strong>Throwable中的常用方法：</strong></p> <ul><li><p><code>public void printStackTrace()</code>打印异常的<strong>详细信息</strong>。</p> <p>包含了异常的类型，异常的原因 ，还包括异常出现的位置，在开发和调试阶段，都得使用printStackTrace</p></li> <li><p><code>public String getMessage()</code>获取发生异常的<strong>原因</strong>。提示<strong>给用户</strong>的时候,就提示错误原因。</p></li></ul></li></ul> <h2 id="_3-2-异常的分类"><a href="#_3-2-异常的分类" class="header-anchor">#</a> 3.2 异常的分类</h2> <p>我们平常说的异常就是指Exception，因为这类异常一旦出现，我们就要对代码进行更正，修复程序。对于这些错误，一般有两种解决方法：一是遇到错误就终止程序 的运行。另一种方法是由程序员在编写程序时，就考虑到错误的 检测、错误消息的提示，以及错误的处理。</p> <p><strong>捕获错误最理想的是在编译期间</strong>，但<strong>有的错误只有在运行时才会发生</strong>。 比如：除数为0，数组下标越界等。</p> <p><strong>异常(Exception)的分类</strong>：根据在编译时期还是运行时期去检查异常。Java语言规范将派生于<strong>Error</strong>类和<strong>RuntimeException</strong>类的所有异常称为<strong>非受查异常（checked异常）</strong>，其他为<strong>受查异常（unchecked异常）</strong></p> <ul><li><strong>编译时期异常</strong>：在编译时期就会检查，如果没有处理异常则编译失败。(IO、日期格式化异常)</li> <li><strong>运行时期异常</strong>：在编译时期运行异常不会被检测(不报错)。在运行时期检查异常。(数学异常)</li></ul> <p><img src="/assets/img/Exception-2.5976c61f.png" alt=""></p> <p><img src="/assets/img/image-20190916232901753.cc0ad52c.png" alt="image-20190916232901753"></p> <p>​</p> <h2 id="_3-3-异常的处理"><a href="#_3-3-异常的处理" class="header-anchor">#</a> 3.3 异常的处理</h2> <p>关于异常对象的产生：</p> <ul><li>系统自动生成的异常对象</li> <li>手动的生成一个异常对象，并抛出（throw）</li></ul> <p>Java提供的是异常处理的<strong>抓抛模型</strong>。</p> <ul><li>抓：可以理解为异常的处理方式：try-catch-finally  、 throws</li> <li>抛：程序在正常执行的过程中，一旦出现异常，就会在异常代码处生成一个对应异常类的对象。该异常对象将被提交给Java运行时系统，这个过程称为抛出(throw)异常。一旦抛出对象以后，其后的代码就不再执行。</li></ul> <h3 id="_3-3-1-抓—捕获异常-try-catch-finally"><a href="#_3-3-1-抓—捕获异常-try-catch-finally" class="header-anchor">#</a> 3.3.1 抓—捕获异常 try-catch-finally</h3> <p><strong>捕获异常</strong>：Java中对异常有针对性的语句进行捕获，可以对出现的异常进行指定方式的处理。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//可能产生异常的代码</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>异常类名  变量名<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//异常的处理逻辑,异常异常对象之后,怎么处理异常对象</span>
    <span class="token comment">//记录日志/打印异常信息/继续抛出异常</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span>异常类名 变量名<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token comment">//一定会执行的代码</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>使用try将可能出现异常代码包装起来，在执行过程中，一旦出现异常，就会生成一个对应异常类的对象，根据此对象的类型，去catch中进行匹配。一旦try中的异常对象匹配到某一个catch时，就进入catch中进行异常的处理。一旦处理完成，就跳出当前的try-catch结构（只匹配一个。在没有写finally的情况）。继续执行其后的代码。</p></li> <li><p>catch中的异常类型如果没有子父类关系，则谁声明在上，谁声明在下无所谓。也可以放入一个catch中。</p> <p>catch中的异常类型如果满足子父类关系，则要求子类一定声明在父类的上面。否则，报错。</p></li> <li><p>常用的异常对象处理的方式：</p> <ul><li><code>String getMessage()</code></li> <li><code>printStackTrace()</code></li></ul></li></ul> <ul><li>在try结构中声明的变量，再出了try结构以后，就不能再被调用</li> <li>try-catch-finally结构<strong>可以嵌套</strong></li> <li>多个异常使用捕获该如何处理
<ul><li>多个异常分别处理</li> <li>多个异常<strong>一次捕获，多次处理</strong>（若捕获的异常<strong>有子父类关系</strong>，<strong>父类放下面</strong>；<strong>没有</strong>可以放在<strong>一个catch中</strong>）</li> <li>多个异常一次捕获一次处理</li></ul></li> <li><strong>运行时异常</strong>被抛出<strong>可以不处理</strong>。即不捕获也不声明抛出。</li></ul> <h4 id="finally-代码块"><a href="#finally-代码块" class="header-anchor">#</a> finally 代码块</h4> <p><strong>finally</strong>：<code>try</code>中异常语句后的代码不被执行，<strong>必须要执行的</strong>可以放在<code>finally</code>中，如<strong>释放系统资源</strong>。但是当在<code>try...catch...</code>中<strong>执行<code>System.exit(0)</code></strong>(表示<strong>退出当前Java虚拟机</strong>)，<strong><code>finally</code>才不会执行</strong></p> <p>语法：<code>try...catch....finally</code>，不能单独使用</p> <ul><li><p>如果<strong>finally有return语句</strong>，将<strong>覆盖</strong>原始的返回值，永远返回finally中的值。一般应避免该情况</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">fin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span> <span class="token comment">//最终返回40。这里若修改为return 4，最终就返回4</span>
        <span class="token comment">// 若没有return a; 这行代码，则无论a怎么变化，还是会返回10；</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="_3-3-2-抓—声明异常-throws"><a href="#_3-3-2-抓—声明异常-throws" class="header-anchor">#</a> 3.3.2 抓—声明异常 throws</h3> <p>关键字<strong>throws</strong>运用于<strong>方法声明之上</strong>，用于<strong>表示当前方法不处理异常</strong>，而是<strong>提醒</strong>该方法的<strong>调用者来处理异常</strong>。</p> <div class="language-java extra-class"><pre class="language-java"><code>修饰符 返回值类型 方法名<span class="token punctuation">(</span>参数<span class="token punctuation">)</span> <span class="token keyword">throws</span> 异常类名<span class="token number">1</span><span class="token punctuation">,</span>异常类名<span class="token number">2</span>…<span class="token punctuation">{</span>   <span class="token punctuation">}</span>
</code></pre></div><ul><li><p>注意：</p> <ul><li><p>throws关键字必须写在<strong>方法声明处</strong>，指明此方法执行时，可能会抛出的异常类型。</p></li> <li><p>一旦当方法体执行时，出现异常，仍会在异常代码处生成一个异常类的对象，此对象满足throws后异常</p> <p>类型时，就会被抛出。异常代码后续的代码，就不再执行！</p></li> <li><p>throws关键字后边声明的异常必须是<strong>Exception或者是Exception的子类</strong></p></li> <li><p>方法内部如果<strong>抛出了多个异常对象</strong>，那么throws后边必须也<strong>声明多个异常</strong></p> <p>如果抛出的多个异常对象有<strong>子父类关系</strong>,那么<strong>直接声明父类异常即可</strong></p></li> <li><p><strong>调用</strong>了一个声明<strong>抛出异常的方法</strong>,我们就必须的<strong>处理</strong>声明的异常</p> <ul><li>要么<strong>try-catch</strong>自己处理异常</li> <li>要么继续使用<strong>throws</strong>声明抛出，交给方法的调用者处理，最终交给JVM</li></ul></li></ul></li></ul> <blockquote><p>开发中如何选择使用try-catch-finally 还是使用throws？</p> <ul><li><strong>如果父类中被重写的方法没有throws方式处理异常，则子类重写的方法也不能使用throws</strong>，意味着如果子类重写的方法中有异常，必须<strong>使用try-catch-finally方式处理</strong>。</li> <li><strong>执行的方法a中，先后又调用了另外的几个方法</strong>，这几个方法是<strong>递进关系</strong>执行的。我们建议这几个方法<strong>使用throws</strong>的方式进行处理。而执行的方法a可以考虑使用try-catch-finally方式进行处理。（可能try-catch已经捕获了异常，之后的需要的数据没获取到）</li></ul></blockquote> <h3 id="_3-3-3-抛—抛出异常throw"><a href="#_3-3-3-抛—抛出异常throw" class="header-anchor">#</a> 3.3.3 抛—抛出异常throw</h3> <p>在编写程序时，我们必须要考虑程序出现问题的情况。比如，在<strong>定义方法</strong>时，方法需要<strong>接受参数</strong>。那么，当调用方法使用接受到的参数时，首先需要<strong>先对参数数据进行合法的判断</strong>，数据若<strong>不合法</strong>，就应该<strong>告诉调用者</strong>，传递合法的数据进来。这时需要使用<strong>抛出异常</strong>的方式来告诉调用者。</p> <ul><li><p>在java中，提供了一个throw关键字，<strong>throw用在方法内，抛出一个指定的异常对象</strong></p> <ul><li><p><strong>创建一个异常对象</strong>，封装一些提示信息(信息可以自己编写)。</p></li> <li><p>通过关键字<strong>throw</strong>将这个异常对象告知给调用者，并结束当前方法的执行</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">throw</span> <span class="token keyword">new</span> 异常类名<span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>注意：</p> <ul><li>throw关键字必须写在<strong>方法的内部</strong></li> <li>throw关键字后边new的对象必须是<strong>Exception或者Exception的子类对象</strong></li> <li>throw关键字抛出指定的异常对象,我们就必须处理这个异常对象
<ul><li>throw关键字后边创建的是<strong>RuntimeException</strong>或是<strong>其子类对象</strong>,<strong>可以不处理</strong>,默认交给JVM处理</li> <li>throw关键字后边创建的是<strong>编译异常</strong>(写代码的时候报错),我们就<strong>必须处理</strong>,要么throws,要么try...catch</li></ul></li></ul></li></ul> <h3 id="_3-3-6-子父类异常注意事项"><a href="#_3-3-6-子父类异常注意事项" class="header-anchor">#</a> 3.3.6 子父类异常注意事项</h3> <ul><li><p>父类的方法<strong>抛出或不抛出</strong>异常，子类重写的方法抛出的异常必须<strong>小于等于父类抛出的异常</strong>（多态）</p></li> <li><p>父类的方法<strong>抛出</strong>一个或多个<strong>异常</strong>，<strong>子类</strong>重写的方法<strong>抛出的异常</strong>必须<strong>与父类相同</strong>或是<strong>其子类</strong>或<strong>不抛</strong></p></li> <li><p>父类的方法<strong>没有异常抛出</strong>，子类重写的方法<strong>不能有异常抛出</strong>。若<strong>产生异常则只能捕获处理</strong></p></li></ul> <h2 id="_3-4-objects非空判断"><a href="#_3-4-objects非空判断" class="header-anchor">#</a> 3.4 Objects非空判断</h2> <p>Objects工具类提供的判断对象是否合法<code>Objects.requireNonNull</code>，为空则抛异常，否则返回该对象。<a href="#Objects">详见此</a></p> <h2 id="_3-5-自定义异常"><a href="#_3-5-自定义异常" class="header-anchor">#</a> 3.5 自定义异常</h2> <ul><li><p>自定义的异常类<strong>继承<code>Exception</code>或<code>RuntimeException</code>（尽量继承这个，对代码没有侵入性）</strong></p></li> <li><p>定义<strong>空参构造</strong>方法和<strong>带异常信息的构造</strong>方法</p></li> <li><p>提供全局常量：serialVersionUID</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token comment">/*RuntimeException*/</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">7034897190745766939L</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MyException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="习题"><a href="#习题" class="header-anchor">#</a> 习题</h2> <ul><li><p>常见的异常，举例说明</p> <ul><li><p>RuntimeException（unchecked）</p> <ul><li><p>NullPointerException</p></li> <li><p>ArithmeticException</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ArrayIndexOutOfBoundsException</p></li> <li><p>NumberFormatException</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
str <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>InputMismatchException</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> score <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span>
scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ClassCastException</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>……</p></li></ul></li> <li><p>java.io.IOException</p> <ul><li>java.io.FileNotFoundException</li></ul></li> <li><p>java.lang.ClassNotFoundException</p></li> <li><p>java.sql.SQLException</p></li> <li><p>java.lang.InterruptedException</p></li></ul></li> <li><p><code>throw</code>和<code>throws</code>区别</p> <ul><li><p>throw：在方法体中，并且抛出一个异常对象。程序执行到t此时立即停止，它后面的语句都不执行。</p> <p>抛出的是<strong>异常对象</strong> ，说明这里<strong>肯定有异常</strong>产生。一般用于自定义异常，体现在选择语句中</p></li> <li><p>throws：在方法声明上，后面跟异常的类名，可以是多个，调用者处理</p> <p><strong>声明方法有异常</strong>，是一种<strong>可能性</strong>，这个异常不一定会产生</p></li></ul></li> <li><p><code>final</code>,<code>finally</code>,<code>finallize</code>区别</p> <ul><li><code>final</code>：最终意思，可以修饰类、成员变量、成员方法。<a href="#final">详见此</a></li> <li><code>finally</code>：异常处理，用于释放资源，finally中的代码一定会被执行，除非执行之前jvm退出</li> <li><code>finalize</code>：Object类的一个方法，用于垃圾回收</li></ul></li> <li><p>throw语句后不能跟其他代码，否则永远执行不到，编译错误</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;怎么也执行不到，编译失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>习题</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReturnExceptionDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;进入方法A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;制造异常&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;用A方法的finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;进入方法B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;调用B方法的finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 进入方法A</span>
        <span class="token comment">// 用A方法的finally</span>
        <span class="token comment">// 制造异常</span>
        <span class="token comment">// 进入方法B</span>
        <span class="token comment">// 调用B方法的finally</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">11/10/2019, 1:13:27 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Java/Core/2 Object Orientation.html" class="prev">2 Object Orientation</a></span> <span class="next"><a href="/Java/Core/4 API.html">4 API</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.11b86352.js" defer></script><script src="/assets/js/2.dc2cb52a.js" defer></script><script src="/assets/js/8.73262d74.js" defer></script>
  </body>
</html>
