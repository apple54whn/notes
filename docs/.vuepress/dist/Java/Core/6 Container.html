<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>6 Container | Conanan&#39;s Notes</title>
    <meta name="description" content="Good Good Study, Day Day Up!">
    
    
    <link rel="preload" href="/assets/css/0.styles.5d7a53ce.css" as="style"><link rel="preload" href="/assets/js/app.11b86352.js" as="script"><link rel="preload" href="/assets/js/2.dc2cb52a.js" as="script"><link rel="preload" href="/assets/js/4.4809e9ae.js" as="script"><link rel="prefetch" href="/assets/js/10.7ed53a9f.js"><link rel="prefetch" href="/assets/js/11.85d70dc7.js"><link rel="prefetch" href="/assets/js/12.6ca0a4c7.js"><link rel="prefetch" href="/assets/js/13.b66f44be.js"><link rel="prefetch" href="/assets/js/14.f7d36314.js"><link rel="prefetch" href="/assets/js/15.c9169b45.js"><link rel="prefetch" href="/assets/js/16.b3affa03.js"><link rel="prefetch" href="/assets/js/17.24a97ffb.js"><link rel="prefetch" href="/assets/js/18.f19a0f23.js"><link rel="prefetch" href="/assets/js/19.ccd87043.js"><link rel="prefetch" href="/assets/js/20.81aafd3b.js"><link rel="prefetch" href="/assets/js/21.0ca18de8.js"><link rel="prefetch" href="/assets/js/22.2ce051e4.js"><link rel="prefetch" href="/assets/js/23.e2addba7.js"><link rel="prefetch" href="/assets/js/24.10dbecb4.js"><link rel="prefetch" href="/assets/js/25.8641a27b.js"><link rel="prefetch" href="/assets/js/26.e5fad68f.js"><link rel="prefetch" href="/assets/js/27.07d175e0.js"><link rel="prefetch" href="/assets/js/3.4d99fa19.js"><link rel="prefetch" href="/assets/js/5.9f00f578.js"><link rel="prefetch" href="/assets/js/6.3ac5cf54.js"><link rel="prefetch" href="/assets/js/7.d18e475f.js"><link rel="prefetch" href="/assets/js/8.73262d74.js"><link rel="prefetch" href="/assets/js/9.1d245c90.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7a53ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Conanan's Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/1 Basic Syntax.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Framwork/1 Spring.html" class="nav-link">Framwork</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages2" class="dropdown-title"><span class="title">Languages2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Group1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li><li class="dropdown-item"><h4>Group2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Study" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Core/1 Basic Syntax.html" class="nav-link">Core</a></li><li class="dropdown-item"><!----> <a href="/Java/Framwork/1 Spring.html" class="nav-link">Framwork</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages2" class="dropdown-title"><span class="title">Languages2</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Group1</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li><li class="dropdown-item"><h4>Group2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/language/chinese/" class="nav-link">Chinese</a></li><li class="dropdown-subitem"><a href="/language/japanese/" class="nav-link">Japanese</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Core</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Java/Core/0 Basic.html" class="sidebar-link">0 Basic</a></li><li><a href="/Java/Core/1 Basic Syntax.html" class="sidebar-link">1 Basic Syntax</a></li><li><a href="/Java/Core/2 Object Orientation.html" class="sidebar-link">2 Object Orientation</a></li><li><a href="/Java/Core/3 Error &amp; Exception.html" class="sidebar-link">3 Error &amp; Exception</a></li><li><a href="/Java/Core/4 API.html" class="sidebar-link">4 API</a></li><li><a href="/Java/Core/5 Generic.html" class="sidebar-link">5 Generic</a></li><li><a href="/Java/Core/6 Container.html" class="active sidebar-link">6 Container</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#_6-1-数据结构" class="sidebar-link">6.1 数据结构</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#_6-2-collection（java-util）" class="sidebar-link">6.2 Collection（java.util）</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#_6-3-iterator（java-util）" class="sidebar-link">6.3 Iterator（java.util）</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#_6-4-list" class="sidebar-link">6.4 List</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#_6-5-set" class="sidebar-link">6.5 Set</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#_6-6-map" class="sidebar-link">6.6 Map</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#container-之间转换" class="sidebar-link">Container 之间转换</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#collections（java-util）" class="sidebar-link">Collections（java.util）</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#jdk9对集合添加的优化" class="sidebar-link">JDK9对集合添加的优化</a></li><li class="sidebar-sub-header"><a href="/Java/Core/6 Container.html#习题" class="sidebar-link">习题</a></li></ul></li><li><a href="/Java/Core/7 Thread.html" class="sidebar-link">7 Thread</a></li><li><a href="/Java/Core/7 Thread2.html" class="sidebar-link">7 Thread2</a></li><li><a href="/Java/Core/8 IO.html" class="sidebar-link">8 IO</a></li><li><a href="/Java/Core/9 NIO.html" class="sidebar-link">9 NIO（暂时未完成）</a></li><li><a href="/Java/Core/10 AIO.html" class="sidebar-link">10 AIO（暂时未完成）</a></li><li><a href="/Java/Core/11 Network.html" class="sidebar-link">11 Network</a></li><li><a href="/Java/Core/12 Reflect.html" class="sidebar-link">12 Reflect—java.lang.reflect</a></li><li><a href="/Java/Core/13 Lambda.html" class="sidebar-link">13 Lambda</a></li><li><a href="/Java/Core/14 Stream API.html" class="sidebar-link">14 Stream API</a></li><li><a href="/Java/Core/15 Optional.html" class="sidebar-link">15 Optional</a></li><li><a href="/Java/Core/16 Test.html" class="sidebar-link">16 Test</a></li><li><a href="/Java/Core/17 设计原则&amp;设计模式.html" class="sidebar-link">17 设计原则及设计模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Code</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_6-container"><a href="#_6-container" class="header-anchor">#</a> 6 Container</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_6-container">6 Container</a><ul><li><a href="#_6-1-数据结构">6.1 数据结构</a><ul><li><a href="#_6-1-1-栈">6.1.1 栈</a></li><li><a href="#_6-1-2-队列">6.1.2 队列</a></li><li><a href="#_6-1-3-数组">6.1.3 数组</a></li><li><a href="#_6-1-4-链表">6.1.4 链表</a></li><li><a href="#_6-1-5-散列集">6.1.5 散列集</a></li><li><a href="#_6-1-6-红黑树">6.1.6 红黑树</a></li></ul></li><li><a href="#_6-2-collection（java-util）">6.2 Collection（java.util）</a></li><li><a href="#_6-3-iterator（java-util）">6.3 Iterator（java.util）</a><ul><li><a href="#_6-3-1-iterator">6.3.1 Iterator</a></li><li><a href="#_6-3-2-foreach循环">6.3.2 foreach循环</a></li><li><a href="#_6-3-3-并发修改异常">6.3.3 并发修改异常</a></li></ul></li><li><a href="#_6-4-list">6.4 List</a><ul><li><a href="#_6-4-1-arraylist">6.4.1 ArrayList</a></li><li><a href="#_6-4-2-linkedlist">6.4.2 LinkedList</a></li><li><a href="#_6-4-3-vector">6.4.3 Vector</a></li></ul></li><li><a href="#_6-5-set">6.5 Set</a><ul><li><a href="#_6-5-1-hashset">6.5.1 HashSet</a></li><li><a href="#_6-5-2-linkedhashset">6.5.2 LinkedHashSet</a></li><li><a href="#_6-5-3-treeset">6.5.3 TreeSet</a></li></ul></li><li><a href="#_6-6-map">6.6 Map</a><ul><li><a href="#_6-6-1-hashmap">6.6.1 HashMap</a></li><li><a href="#_6-6-2-linkedhashmap">6.6.2 LinkedHashMap</a></li><li><a href="#_6-6-3-treemap">6.6.3 TreeMap</a></li><li><a href="#_6-6-4-hashtable">6.6.4 Hashtable</a></li><li><a href="#_6-6-5-properties">6.6.5 Properties</a></li></ul></li><li><a href="#container-之间转换">Container 之间转换</a><ul><li><a href="#list-与-set-之间转换">List 与 Set 之间转换</a></li></ul></li><li><a href="#collections（java-util）">Collections（java.util）</a></li><li><a href="#jdk9对集合添加的优化">JDK9对集合添加的优化</a></li><li><a href="#习题">习题</a><ul><li><a href="#统计字符串中字符个数">统计字符串中字符个数</a></li><li><a href="#斗地主洗牌发牌看牌">斗地主洗牌发牌看牌</a></li><li><a href="#foreach问题">Foreach问题</a></li><li><a href="#list-面试题">List 面试题</a></li><li><a href="#在-list-中去除重复值">在 List 中去除重复值</a></li><li><a href="#arraylist、linkedlist、vector-异同">ArrayList、LinkedList、Vector 异同</a></li><li><a href="#以自定义的customer类为例，何时需要重写equals">以自定义的Customer类为例，何时需要重写equals()?</a></li><li><a href="#为什么用eclipse-idea复写hashcode方法，有31这个数字">为什么用Eclipse/IDEA复写hashCode方法，有31这个数字?</a></li><li><a href="#set-重要习题">Set 重要习题</a></li><li><a href="#hashmap和hashtable区别">HashMap和Hashtable区别</a></li><li><a href="#hashmap-的底层实现原理">HashMap 的底层实现原理</a></li><li><a href="#负载因子值的大小，对hashmap有什么影响">负载因子值的大小，对HashMap有什么影响</a></li><li><a href="#关于map的key是否可以修改">关于Map的key是否可以修改?</a></li><li><a href="#hashtable-和-concurrenthashmap-的异同">Hashtable 和 ConcurrentHashMap 的异同</a></li><li><a href="#collection和collections的区别">Collection和Collections的区别</a></li><li><a href="#姓氏统计">姓氏统计</a></li><li><a href="#对一个java源文件中的关键字进行计数">对一个Java源文件中的关键字进行计数</a></li></ul></li></ul></li></ul></div><p></p> <blockquote><p>课件中还有深入分析，推荐！（集合与数组这两章节）</p></blockquote> <ul><li><p><strong>对象数组：<strong>数组可以存储基本数据类型和引用类型，存储引用类型的数组就叫</strong>对象数组</strong></p></li> <li><p><strong>容器（container）</strong></p></li> <li><p><strong>由来</strong>  Java--&gt;面向对象--&gt;操作很多对象--&gt;存储--&gt;容器</p> <ul><li><strong>容器与数组的区别</strong> <ol><li><strong>长度</strong>     数组固定，容器（集合）可变</li> <li><strong>存储类型</strong>     数组可以是基本类型和引用类型，容器（集合）只能是引用类型</li> <li><strong>元素类型</strong>     数组只能存储同一类型，容器（集合）可以存储不同类型（一般也存储同一种类型）</li> <li>方法		     数组方法有限，增删改非常不便，效率也不高；集合就不同了，可选择性多</li> <li>数据结构      数组元素有序可重复；集合可选择多</li></ol></li></ul></li></ul> <h2 id="_6-1-数据结构"><a href="#_6-1-数据结构" class="header-anchor">#</a> 6.1 数据结构</h2> <h3 id="_6-1-1-栈"><a href="#_6-1-1-栈" class="header-anchor">#</a> 6.1.1 栈</h3> <ul><li><p><strong>栈（stack）</strong>：又称堆栈，它是<strong>运算受限的线性表</strong>，其限制是仅允许在栈的一端进行插入和删除操作，不允许在其他任何位置进行添加、查找、删除等操作。</p> <ul><li><p><strong>后进先出（LIFO）</strong>。例如，弹夹，浏览器回退</p></li> <li><p><strong>栈的入口、出口的都是栈的顶端位置</strong>。</p> <p><img src="/assets/img/heap-stack.ae0fcc1e.png" alt=""></p></li></ul></li> <li><p><strong>压栈</strong>：就是<strong>存</strong>元素。</p></li> <li><p><strong>弹栈</strong>：就是<strong>取</strong>元素。</p></li></ul> <h3 id="_6-1-2-队列"><a href="#_6-1-2-队列" class="header-anchor">#</a> 6.1.2 队列</h3> <ul><li><strong>队列（queue）</strong>：简称队，它同堆栈一样，也是一种<strong>运算受限的线性表</strong>，其限制是仅允许在表的一端进行插入，而在表的另一端进行删除。
<ul><li><strong>先进先出</strong>。例如，小火车过山洞，车头先进去，车尾后进去；车头先出来，车尾后出来。</li> <li><strong>队列的入口、出口各占一侧</strong>。例如，下图中的左侧为入口，右侧为出口。</li></ul></li></ul> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="_6-1-3-数组"><a href="#_6-1-3-数组" class="header-anchor">#</a> 6.1.3 数组</h3> <ul><li><strong>数组（Array）</strong>：是有序的元素序列，数组是在内存中开辟一段连续的空间，并在此空间存放元素。
<ul><li>==<strong>查询快</strong>==：<strong>通过索引</strong>，可以快速访问指定位置的元素。</li> <li>==<strong>增删慢</strong>：需要把增删元素后面的元素<strong>移位</strong>。<strong>Java中利用的是</strong>==<strong><code>System.copyArray(...)</code></strong></li></ul></li></ul> <h3 id="_6-1-4-链表"><a href="#_6-1-4-链表" class="header-anchor">#</a> 6.1.4 链表</h3> <ul><li><strong>链表（linked list）</strong>：由一系列<strong>结点（node）<strong>组成，包括：存储数据元素的</strong>数据域（date）</strong>，存储<strong>后继结点地址（next）<strong>的指针域。Java中所有链表都是双向链表，即每个结点还存放着</strong>前驱结点的地址（previous）</strong>。
<ul><li>==<strong>查找慢</strong>==：想查找某个元素，需要通过连接的节点，依次向后查找指定元素。</li> <li>==<strong>增删快</strong>==：只需要修改连接下个元素和连接上个元素的地址即可。</li></ul></li></ul> <h3 id="_6-1-5-散列集"><a href="#_6-1-5-散列集" class="header-anchor">#</a> 6.1.5 散列集</h3> <h3 id="_6-1-6-红黑树"><a href="#_6-1-6-红黑树" class="header-anchor">#</a> 6.1.6 红黑树</h3> <ul><li><strong>二叉树（binary tree）</strong>：是每个结点不超过2个分支且每个结点只能有一个父节点的<strong>有序树</strong> 。</li> <li><strong>二叉排序树</strong>或者是一棵空树，或者是具有下列性质的二叉树：
<ul><li>若左子树不空，则左子树上所有结点的值均小于它的根结点的值；</li> <li>若右子树不空，则右子树上所有结点的值均大于它的根结点的值；</li> <li>左、右子树也分别为二叉排序树；</li> <li>没有键值相等的节点。</li></ul></li> <li><strong>红黑树</strong>：是一种<strong>自平衡二叉查找树</strong>。红黑树是每个节点都带有颜色属性的二叉查找树，颜色或红色或黑色
<ul><li>约束如下：
<ul><li>根节点是黑色。</li> <li>节点是红色或黑色。</li> <li>每个叶节点（NIL节点，空节点）是黑色的。</li> <li>每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)</li> <li>从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。</li></ul></li> <li>特点：<strong>查询速度特别快</strong>，趋近平衡树，查找叶子元素最少和最多次数不多于二倍</li></ul></li></ul> <h2 id="_6-2-collection（java-util）"><a href="#_6-2-collection（java-util）" class="header-anchor">#</a> 6.2 Collection（java.util）</h2> <p><img src="/assets/img/image-20191007235251066.439cfd9e.png" alt="image-20191007235251066"></p> <ul><li><code>Collection</code>是所有<strong>单列集合</strong>的<strong>父接口</strong>，因此在Collection中定义了单列集合(List和Set)通用的一些方法，这些方法可用于操作所有的单列集合。由于<strong>其<code>Override</code>了<code>toString()</code>方法</strong>，所以可以直接打印其内容。</li> <li>注意：添加<strong>自定义元素</strong>到<code>Collection</code>集合中时，需要<strong>重写</strong>该元素所属类的<code>equals()</code></li> <li><strong>常用方法（底层会调用<code>equals</code>方法，建议重写）</strong> <ul><li><strong>添加</strong> <ul><li><code>boolean add(E e)</code>：当成单独元素</li> <li><code>boolean addAll(Collection c)</code>：以整体添加，但每个都是独立的</li></ul></li> <li><strong>删除</strong> <ul><li><code>void clear()</code>：删除集合中所有元素，但集合还存在</li> <li><code>boolean remove(Object o)</code>：区别 List 中的</li> <li><code>boolean removeAll(Collection c)</code>：差集关系</li> <li><code>default boolean removeIf(Predicate&lt;? super E&gt; filter)</code>：根据条件删除</li></ul></li> <li><strong>判断</strong> <ul><li><code>boolean isEmpty()</code></li> <li><code>boolean contains(Object o)</code> ：</li> <li><code>boolean containsAll(Collection&lt;?&gt; c)</code>  ：子集关系</li> <li><code>boolean equals(Object o)</code>：（根据实际对象可能根据元素顺序依次）对比每个元素</li> <li><code>int hashCode()</code></li></ul></li> <li><strong>交集</strong> <ul><li><code>boolean retainAll(Collection&lt;?&gt; c)</code>：交集</li></ul></li> <li><strong>获取容量</strong> <ul><li><code>int size()</code></li></ul></li> <li><strong>返回迭代器，<code>Collection</code>特有</strong> <ul><li><code>Iterator iterator()</code></li></ul></li> <li><strong>集合</strong>转<strong>数组</strong> <ul><li><code>Object[] toArray()</code></li></ul></li> <li><strong>Stream 流</strong></li></ul></li></ul> <h2 id="_6-3-iterator（java-util）"><a href="#_6-3-iterator（java-util）" class="header-anchor">#</a> 6.3 Iterator（java.util）</h2> <h3 id="_6-3-1-iterator"><a href="#_6-3-1-iterator" class="header-anchor">#</a> 6.3.1 Iterator</h3> <ul><li><code>Iterator</code>对象称为迭代器（设计模式的一种），主要用于遍历 <code>Collection</code> 集合中的元素。</li> <li>GOF给迭代器模式的定义为：提供一种方法访问一个容器（container）对象中各个元素，而又不需暴露该对象的内部细节。迭代器模式，就是为容器而生。类似于“公交车上的售票员”、“火车上的乘务员”、“空姐”。——检票</li> <li><code>Collection</code>接口继承了<code>java.lang.Iterable</code>接口，该接口有一个<code>iterator()</code>方法，那么所有实现了<code>Collection</code>接口的集合类都有一个<code>iterator()</code>方法，用以返回一个实现了<code>Iterator</code>接口的对象。<code>Iterator</code> <strong>仅用于遍历集合</strong>，<code>Iterator</code> 本身并不提供承装对象的能力。如果需要创建<code>Iterator</code> 对象，则必须有一个被迭代的集合。集合对象<strong>每次</strong>调用<code>iterator()</code>方法都得到一个<strong>全新的迭代器对象</strong>，<strong>默认游标都在集合的第一个元素之前</strong>。</li></ul> <p>常用方法：</p> <ul><li><p><code>Iterator&lt;E&gt; iterator()</code>: <strong>获取<code>Collection</code>对应的迭代器</strong>，用来遍历集合中的元素的。这个接口的泛型跟着所属集合走，集合是什么泛型，迭代器就是什么泛型。<strong>每次调用都会得到一个全新的迭代器对象</strong>。</p></li> <li><p><code>boolean hasNext()</code>：如果<strong>容器中还有元素可以迭代</strong>，则<strong>返回 true</strong>。</p></li> <li><p><code>E next()</code>：指针下移，并返回迭代的<strong>元素</strong>。</p></li> <li><p><code>default void remove()</code>：删除集合的元素。但是是遍历过程中通过迭代器对象的<code>remove</code>方法，<strong>不是集合对象的<code>remove</code>方法</strong>。如果还未调用<code>next()</code>或在上一次调用 <code>next()</code> 方法之后已经调用了 <code>remove</code> 方法，再调用<code>remove</code>都会报<code>IllegalStateException</code>。</p></li> <li><div class="language-java extra-class"><pre class="language-java"><code>  <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// iterator.remove();// 错误</span>
      <span class="token class-name">String</span> next <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          iterator<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// iterator.remove();// 错误</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ul> <ul><li><p>迭代器执行原理如下：</p> <p><img src="/assets/img/page17image24711664.5c331213.png" alt="page17image24711664.png"></p> <p>在调用<code>it.next()</code>方法之前必须要调用<code>it.hasNext()</code>进行检测。若不调用，且下一条记录无效，会抛出<code>NoSuchElementException</code>异常。</p> <p><code>Iterator</code>迭代器对象在遍历集合时，内部采用指针的方式来跟踪集合中的元素。在调用<code>Iterator</code>的<code>next()</code>方法之前，迭代器的索引位于<strong>第一个元素之前</strong>，不指向任何元素，当第一次调用迭代器的<code>next()</code>方法后，迭代器的<strong>索引会向后移动一位，指向第一个元素并将该元素返回</strong>，当再次~。依此类推，直到<code>hasNext()</code>方法返回false，表示到达了集合的末尾，终止对元素的遍历。</p></li></ul> <h3 id="_6-3-2-foreach循环"><a href="#_6-3-2-foreach循环" class="header-anchor">#</a> 6.3.2 foreach循环</h3> <ul><li><p>增强for循环（也称foreach循环）是<strong>JDK1.5</strong>以后出来的一个高级for循环，专门用来<strong>遍历<code>Array</code>和<code>Collection</code></strong>。它的内部<strong>原理其实是个<code>Iterator</code>迭代器</strong>，所以在遍历的过程中，<strong>尽量不要对<code>Collection</code>中的元素进行增删操作</strong>。</p></li> <li><p><code>Collection&lt;E&gt; extends Iterable&lt;E&gt;</code>，（<strong>所有Collection</strong>）实现此接口允许对象成为“<strong>foreach</strong>”语句目标。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arraylist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token operator">:</span>arraylist<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="_6-3-3-并发修改异常"><a href="#_6-3-3-并发修改异常" class="header-anchor">#</a> 6.3.3 并发修改异常</h3> <ul><li><p><code>ConcurrentModificationException</code>现象：<strong>迭代器遍历集合，集合修改集合元素</strong></p></li> <li><p>原因：迭代器依赖于集合，而集合的改变导致迭代器预期的迭代次数发生改变</p></li> <li><p>解决：</p> <ul><li><p><strong>迭代器遍历，并利用<code>Iterator</code>的<code>remove</code>方法</strong></p></li> <li><p><strong>集合遍历，集合修改</strong>（利用<code>get()</code>和<code>size()</code>），增加元素在集合末尾</p></li> <li><p>删除元素时并跟上break语句</p></li></ul></li></ul> <h2 id="_6-4-list"><a href="#_6-4-list" class="header-anchor">#</a> 6.4 List</h2> <ul><li>元素<strong>有序</strong>（存储时按照底层数组索引添加，读取时和存储顺序一致）、<strong>可重复</strong>、稳定（相对 hash 重排）。可通过<strong>索引</strong>来访问指定元素。其实现类都重写了<code>toString()</code>方法。存储自定义对象时，需<strong>重写</strong>其<code>equals()</code></li></ul> <ul><li><strong>特有方法</strong> <ul><li><strong>添加</strong> <ul><li><code>void add([int index,]E e)</code>：当成单独元素</li> <li><code>void addAll([int index,] Collection c)</code>：当成整体，每个都是独立的</li></ul></li> <li><strong>删除</strong> <ul><li><code>Object remove(int index)</code>：返回被删除元素</li> <li><code>boolean remove(Object o)</code>：删除对象</li></ul></li> <li><strong>修改替换</strong> <ul><li><code>Object set(int index,E e)</code>：返回被替换掉的元素</li></ul></li> <li><strong>获取</strong> <ul><li><code>Object get(index)</code></li> <li><code>int indexOf(Object o)</code></li> <li><code>int lastIndexOf(Object o)</code></li> <li><code>List subList(int fromIndex,int toIndex)</code>：返回新的 List，旧 List 不改变</li></ul></li> <li>长度：同 Collection
<ul><li><code>int size()</code></li></ul></li> <li>遍历：由于有索引，所以<strong>List集合特有遍历功能</strong><code>get()</code>和<code>size()</code>结合的<strong>普通for循环</strong>。还有<strong>迭代器</strong>、<strong>foreach</strong>。</li></ul></li></ul> <h3 id="_6-4-1-arraylist"><a href="#_6-4-1-arraylist" class="header-anchor">#</a> 6.4.1 ArrayList</h3> <ul><li><p><strong>底层是数组，查询快，增删慢</strong>。<strong>不同步，线程不安全，效率高</strong></p></li> <li><p>常用方法：没有特殊方法</p></li> <li><p>源码分析（JDK7）</p> <ul><li><p><code>ArrayList list = new ArrayList()</code>，底层创建了长度是<strong>10</strong>的<code>Object[]</code>数组<code>elementData</code></p></li> <li><p><code>list.add(123)</code> 即<code>elementData[0] = new Integer(123)</code></p></li> <li><p><code>list.add(11)</code>，如果此次的添加导致底层<code>elementData</code>数组容量不够，则扩容。</p></li> <li><p>默认情况下扩容为<strong>原来的容量的1.5倍</strong>（原有容量+容量右移一位），同时需要将原有数组中的数据<strong>复制到新数组</strong>中。</p> <p>若扩容一次后还不够，则使用传入的容量（后续总结）</p></li></ul></li> <li><p>源码分析（JDK8）</p> <ul><li><code>ArrayList list = new ArrayList()</code>，底层<code>Object[] elementData</code>初始化为<code>{}</code>，并没有创建长度为10的数组</li> <li><code>list.add(123)</code>，第一次调用<code>add()</code>时，底层才创建了长度10的数组，并将数据123添加到<code>elementData[0]</code></li> <li>后续的添加和扩容操作与jdk 7 无异（但是注释没改！）</li></ul></li> <li><p>小结：jdk7中的<code>ArrayList</code>的对象的创建类似于<strong>单例的饿汉式</strong>，而jdk8中的<code>ArrayList</code>的对象的创建类似于<strong>单例的懒汉式</strong>，<strong>延迟了数组的创建，节省内存</strong>。</p></li> <li><p><strong>建议开发中使用带参的构造器</strong>：<code>ArrayList list = new ArrayList(int capacity)</code></p></li></ul> <h3 id="_6-4-2-linkedlist"><a href="#_6-4-2-linkedlist" class="header-anchor">#</a> 6.4.2 LinkedList</h3> <ul><li><strong>底层是双向链表，查询慢，增删快</strong>。<strong>线程不安全，效率高</strong>。重写了<code>toString()</code>方法</li> <li><strong>特有方法（操作首尾元素）</strong> <ul><li><strong>添加</strong> <ul><li><code>void addFirst(E e)</code>==<code>void linkFirst(E e)</code>==<code>void push(E e)</code>（底层 <code>addFirst(E e)</code>）</li> <li><code>void addLast(E e)</code>==<code>void linkLast(E e)</code></li> <li><code>boolean offer(E e)</code>：Adds the specified element as the tail (last element) of this list.底层<code>add(E e)</code> <ul><li><code>boolean offerFirst(E e)</code>：Inserts the specified element at the front of this list.</li> <li><code>boolean offerLast(E e)</code>：Inserts the specified element at the end of this list.</li></ul></li></ul></li> <li><strong>删除</strong> <ul><li><code>Object removeFirst()</code>==<code>pop(E e)</code>（底层<code>removeFirst()</code>）：NoSuchElementException if this list is empty</li> <li><code>Object removeLast()</code></li></ul></li> <li><strong>获取</strong> <ul><li><code>E element()</code>：Retrieves, but does not remove, the head (first element) of this list.NoSuchElementException if this list is empty。底层<code>getFirst()</code></li> <li><code>E peek()</code>：Retrieves, but does not remove, the head (first element) of this list.retrun null if this list is empty
<ul><li><code>E peekFirst()</code>：etrieves, but does not remove, the first element of this list,or returns null if this list is empty.</li> <li><code>E peekLast()</code>：Retrieves, but does not remove, the last element of this list,or returns null if this list is empty.</li></ul></li> <li><code>E poll()</code>：Retrieves and removes the head (first element) of this list.retrun null if this list is empty
<ul><li><code>E pollFirst()</code>：Retrieves and removes the first element of this list, or returns null if this list is empty.</li> <li><code>E pollLast()</code>：Retrieves and removes the last element of this list, or returns null if this list is empty.</li></ul></li> <li><code>E getFirst()</code>：NoSuchElementException if this list is empty</li> <li><code>E getLast()</code></li></ul></li></ul></li></ul> <ul><li><p>源码分析（JDK8，与7没区别）</p> <ul><li><p><code>LinkedList list = new LinkedList()</code>，内部声明了<code>Node</code>内部类的<code>first</code>和<code>last</code>属性，默认值为<code>null</code></p></li> <li><p><code>list.add(123)</code>，将123封装到Node中，创建了Node对象。</p></li> <li><p>其中，<code>Node</code>定义为：体现了<code>LinkedList</code>的双向链表的说法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">E</span> item<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>

    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul> <h3 id="_6-4-3-vector"><a href="#_6-4-3-vector" class="header-anchor">#</a> 6.4.3 Vector</h3> <ul><li>源码分析：
<ul><li>jdk7和jdk8中通过Vector()构造器创建对象时，底层直接创建了长度为10的数组。</li> <li>扩容时与 ArrayLIst 相比，默认变为原来的2</li></ul></li></ul> <h2 id="_6-5-set"><a href="#_6-5-set" class="header-anchor">#</a> 6.5 Set</h2> <ul><li><p>元素<strong>无序</strong>（存储时不是按照类似数组索引顺序添加）、<strong>唯一</strong>。底层都是对应的<code>*Map</code>。由于没有索引，只可以通过<code>Iterator</code>或<code>foreach</code>。与<code>Collection</code>接口的方法一致，<code>Set</code> 的实现类都重写了<code>toString()</code>方法。</p></li> <li><p>使用Set集合保存<strong>自定义对象（可为 null）</strong>。带有<code>Hash*</code>的<strong>必须重写</strong><code>hashCode()</code>和<code>equal()</code>方法，且重写的俩方法尽可能保持<strong>一致性</strong>（即相等的对象必须有相同的 hashCode ，不相等亦如此）</p> <p>​</p></li></ul> <h3 id="_6-5-1-hashset"><a href="#_6-5-1-hashset" class="header-anchor">#</a> 6.5.1 HashSet</h3> <ul><li><p>底层数据结构是<strong>哈希表（元素为链表或红黑树的数组）</strong>，实际上是一个<code>HashMap</code>实例（value 存储静态的 Object），查询快。<strong>根据<code>hashCode</code>决定元素的存放位置</strong>，但<strong>迭代出的元素顺序和存入顺序不一定一致</strong>，即<strong>不稳定</strong>（hash重排）。</p></li> <li><p>初始容量为16，当如果使用率超过0.75，(16*0.75=12) 就会扩大容量为原来的2倍（16扩容为32，依次为64,128....等）</p></li> <li><p><strong>添加元素过程</strong>（以 HashSet 为例）</p> <ul><li><p>向<code>HashSet</code>中添加元素<code>a</code>，首先调用元素<code>a</code>所在类的<code>hashCode()</code>方法，计算元素<code>a</code>的<code>hashCode</code>。</p></li> <li><p>此<code>hashCode</code>值接着通过某种散列函数（如：取模。这个散列函数会与底层数组的长度相计算得到在数组中的下标，并且这种散列函数计算还尽可能保证能均匀存储元素，越是散列分布， 该散列函数设计的越好 ）计算出在<code>HashSet</code>底层数组中的存放位置（即为：索引位置），判断数组此位置上是否已经有元素：</p> <ul><li>如果此位置上没有其他元素，则元素<code>a</code>添加成功。 ——&gt;情况1</li> <li>如果此位置上有其他元素<code>b</code>（或以链表或红黑树形式存在的多个元素），则比较元素<code>a</code>与元素<code>b</code>的<code>hashCode</code>值：
<ul><li>如果<code>hashCode</code>值不相同，则元素<code>a</code>添加成功。——&gt;情况2</li> <li>如果<code>hashCode</code>值相同，进而需要调用元素<code>a</code>所在类的<code>equals()</code>方法：
<ul><li><code>equals()</code>返回<code>true</code>,元素<code>a</code>添加失败</li> <li><code>equals()</code>返回<code>false</code>,则元素<code>a</code>添加成功。——&gt;情况3</li></ul></li></ul></li></ul></li> <li><p>对于添加成功的情况2和情况3而言：元素<code>a</code>与已经存在指定索引位置上数据以<strong>链表或红黑树</strong>的方式存储。</p> <ul><li><p>JDK7：元素<code>a</code>放到数组中，指向原来的元素。</p></li> <li><p>JDK8：原来的元素在数组中，指向元素<code>a</code></p> <p>总结：七上八下</p></li></ul></li></ul></li></ul> <h3 id="_6-5-2-linkedhashset"><a href="#_6-5-2-linkedhashset" class="header-anchor">#</a> 6.5.2 LinkedHashSet</h3> <ul><li>继承<code>HashSet</code>，底层数据结构是<strong>双向链表和哈希表（元素为链表或红黑树的数组），元素迭代顺序和存入顺序一致</strong></li> <li><code>LinkedHashSet</code><strong>插入性能略低</strong>于 <code>HashSet</code>，但在<strong>迭代访问</strong> <code>Set</code> 里的<strong>全部元素</strong>时<strong>有很好的性能</strong>。</li></ul> <h3 id="_6-5-3-treeset"><a href="#_6-5-3-treeset" class="header-anchor">#</a> 6.5.3 TreeSet</h3> <ul><li><p>底层数据结构是<strong>红黑树（自平衡二叉树），有序，查询速度比<code>List</code>快 <strong>，实际上是一个 <code>TreeMap</code>实例。使用<code>TreeSet</code>保存自定义元素，这个元素</strong>必须实现<code>Comparable</code>接口</strong>或构造时<strong>必须提供<code>Comparator</code>实现类</strong></p> <ul><li>元素唯一性通过红黑树存储时确定，相同元素丢弃， <strong>根据<code>compareTo</code>返回值是否是0来决定</strong></li> <li>元素的顺序通过红黑树存储，并通过<strong>中（根）序遍历展示</strong></li></ul></li> <li><p>新增的方法如下：</p> <ul><li><code>Comparator comparator()</code></li> <li><code>Object first()</code></li> <li><code>Object last()</code></li> <li><code>Object lower(Object e)</code></li> <li><code>Object higher(Object e)</code></li> <li><code>SortedSet subSet(fromElement, toElement)</code></li> <li><code>SortedSet headSet(toElement)</code></li> <li><code>SortedSet tailSet(fromElement)</code></li></ul></li> <li><p><strong>保证元素的排列方式：</strong></p> <ol><li><p><strong>自然排序（元素具备比较性）</strong>：让元素所属的类实现<code>Comparable</code>接口，重写<code>compareTo</code></p> <p>向 TreeSet 中添加元素时，只有第一个元素无须比较<code>compareTo()</code>方法，后面添加的所有元素都会调用<code>compareTo()</code>方法进行比较。且重写该对象对应的 <code>equals()</code> 方法时，应保证该方法与 <code>compareTo(Object obj)</code> 方法有一致的结果</p></li> <li><p><strong>比较器排序（集合具备比较性）</strong>：让集合构造方法接收<code>Comparator</code>接口的实现类对象，重写<code>compare</code></p> <p>向 TreeSet 中添加元素时，只有第一个元素无须比较<code>compare()</code>方法，后面添加的所有元素都会调用<code>compare()</code>方法进行比较。且重写该对象对应的 <code>equals()</code> 方法时，应保证该方法与 <code>compare()</code> 方法有一致的结果</p> <p><strong>s1-s2升序，s2-s1降序</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Lambda</span>
<span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span>
    <span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenComparing</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div></li></ol></li></ul> <h2 id="_6-6-map"><a href="#_6-6-map" class="header-anchor">#</a> 6.6 Map</h2> <p><img src="/assets/img/image-20191007235010685.0a520a98.png" alt="image-20191007235010685"></p> <ul><li><p><strong>键值对</strong>。类似函数：一个映射不能包含重复的键，每个键最多只能映射到一个值（<strong>键唯一，值可重复</strong>），其实现类都重写了<code>toString()</code>方法</p></li> <li><p>Map中的<strong>结构</strong>：</p> <ul><li>key：无序、不可重复，使用 Set 存储。需重写 <code>equals()</code> 、<code>HahsCode()</code>（根据是否是 Hash 存储）</li> <li>value：无序、可重复，使用 Collection 存储。需重写 <code>equals()</code></li> <li>Entry：一个 key-value 对构成了一个 Entry 对象，使用 Set 存储</li></ul></li> <li><p>带有<code>Hash*</code>存储自定义的对象时<strong>必须重写</strong><code>hashCode()</code>和<code>equal()</code>方法，且重写的俩方法尽可能保持<strong>一致性</strong>（即相等的对象必须有相同的 hashCode ，不相等亦如此）</p></li> <li><p><strong>常用方法</strong></p> <ul><li><p><strong>添加、修改</strong></p> <ul><li><p><code>V put(K key,V value)</code></p> <p>如果键是第一次存储，就直接存储元素，<strong>返回以前的值</strong>null</p> <p>如果键不是第一次存储，就替换掉以前的值，并<strong>返回以前的值</strong></p></li> <li><p><code>void putAll(Map&lt;? extends K, ? extends V&gt; m)</code>：每个元素单独 put</p></li></ul></li> <li><p><strong>删除</strong></p> <ul><li><code>void clear()</code>                    删除所有映射关系</li> <li><code>V remove(Object key</code>)     根据键删除键值对元素，key为空返回null，否则返回值</li></ul></li> <li><p><strong>获取</strong></p> <ul><li><code>V get(Object key)</code>              根据键获取值</li> <li><code>Set&lt;K&gt; keySet()</code>                 返回所有键的集合</li> <li><code>Collection&lt;V&gt; values()</code>     返回所有值的集合</li> <li><code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code>    返回映射关系的Set集合</li></ul></li> <li><p><strong>判断</strong></p> <ul><li><code>boolean isEmpty()</code>            是否为空</li> <li><code>boolean containsKey(Object key)</code>   是否包<strong>含指定键值</strong></li> <li><code>boolean containsValue(Object value)</code>  是否<strong>包含指定值</strong></li></ul></li> <li><p><strong>容量</strong></p> <ul><li><code>int size()</code>      返回映射中键值对的对数</li></ul></li></ul></li> <li><p><strong>遍历方法</strong></p> <ul><li><p><strong>JDK1.8及以后推荐使用<code>Stream</code>的<code>foreach()</code>方法，lambda表达式</strong></p></li> <li><p><strong>键值对（<code>entrySet()</code>/<code>getKey()</code>/<code>getValue()</code>）</strong>，获取存储键值对对象的Set结合。推荐此方法。</p> <p>Map集合一创建，就会在Map集合中创建一个Entry对象，用来记录键值对对象（<code>Map.Entry&lt;K,V&gt;</code>)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> hm<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> entry<span class="token operator">:</span>set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1=hello</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;---&quot;</span><span class="token operator">+</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1---hello</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><strong>键找值（<code>keySet()</code>/<code>get()</code>）</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> hm<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token operator">:</span>set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">&quot;---&quot;</span><span class="token operator">+</span>hm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//或</span>
<span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> key  <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> value <span class="token operator">=</span> hm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key<span class="token operator">+</span><span class="token string">&quot;---&quot;</span><span class="token operator">+</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong><code>values()</code>方法，存储Map中值的Collection集合</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> values <span class="token operator">=</span> hm<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token operator">:</span>values<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li></ul> <h3 id="_6-6-1-hashmap"><a href="#_6-6-1-hashmap" class="header-anchor">#</a> 6.6.1 HashMap</h3> <ul><li><p>底层数据结构是<strong>哈希表（元素为链表或红黑树的数组）</strong>，查询快。<strong>根据<code>hashCode</code>决定元素的存放位置</strong>，但<strong>迭代出的元素顺序和存入顺序不一定一致</strong>，底层存储<strong>不稳定</strong>（hash重排）。</p></li> <li><p>HashMap源码中的重要常量</p> <ul><li><code>DEFAULT_INITIAL_CAPACITY</code> : HashMap的默认容量，16</li> <li><code>MAXIMUM_CAPACITY</code> : HashMap的最大支持容量，2^30</li> <li><code>DEFAULT_LOAD_FACTOR</code>:HashMap的默认加载因子，0.75</li> <li><code>TREEIFY_THRESHOLD</code>:Bucket中链表长度大于该默认值，转化为红黑树</li> <li><code>UNTREEIFY_THRESHOLD</code>:Bucket中红黑树存储的Node小于该默认值，转化为链表</li> <li><code>MIN_TREEIFY_CAPACITY</code>:桶中的Node被树化时最小的hash表容量，64。（当桶中Node的数量大到需要变红黑树时，若hash表容量小于<code>MIN_TREEIFY_CAPACITY</code>时，此时应执行 resize扩容操作这个<code>MIN_TREEIFY_CAPACITY</code>的值至少是<code>TREEIFY_THRESHOLD</code>的4倍）</li> <li><code>table</code>:存储元素的数组，总是2的n次幂</li> <li><code>entrySet</code>:存储具体元素的集</li> <li><code>size</code>:HashMap中存储的键值对的数量</li> <li><code>modCount</code>:HashMap扩容和结构改变的次数。</li> <li><code>threshold</code>:扩容的临界值，容量*填充因子</li> <li><code>loadFactor</code>:填充因子</li></ul></li> <li><p><strong>底层实现原理</strong>（JDK7）：</p> <ul><li><p><code>HashMap</code>的内部存储结构其实是<strong>数组和链表</strong>的结合。当实例化一个<code>HashMap</code>时， 系统会创建一个长度为<code>Capacity</code>的<code>Entry</code>数组，这个长度在哈希表中被称为容量 (Capacity)，在这个数组中可以存放元素的位置我们称之为“<strong>桶</strong>”（<code>bucket</code>），每个<code>bucket</code>都有自己的索引，系统可以根据索引快速的查找<code>bucket</code>中的元素。</p> <p>每个<code>bucket</code>中存储一个元素，即一个<code>Entry</code>对象，但每一个<code>Entry</code>对象可以带一个引用变量，用于指向下一个元素，因此，在一个桶中，就有可能生成一个<code>Entry</code>链。 而且新添加的元素作为链表的<code>head</code>。</p> <p><code>HashMap map = new HashMap([int initialCapacity])</code>在实例化以后，底层创建了**长度是<code>initialCapacity</code>（默认16）**的一维数组<code>Entry[] table</code></p></li> <li><p>可能已经执行过多次<code>put(.)</code>，<code>map.put(key1,value1)</code>。首先，调用<code>key1</code>所在类的<code>hashCode()</code>和其他算法计算其 <code>hash</code>，此<code>hash</code>经过某种算法计算以后（位运算方式取模），得到在<code>Entry[]</code>中的存放位置。</p> <ul><li>如果此位置上的数据为空，此时的 key1-value1 即 Entry添加成功。 ——情况1</li> <li>如果此位置上的数据不为空（意味着此位置上存在一个或多个数据（以链表形式存在）），比较key1和已经存在的一个或多个数据的<code>hash</code>：
<ul><li>如果key1的<code>hash</code>与已经存在的数据的<code>hash</code>都不相同，此时key1-value1添加成功。——情况2</li> <li>如果key1的<code>hash</code>和已经存在的某一个数据(key2-value2)的<code>hash</code>相同，继续比较：调用key1所在类的<code>equals(key2)</code>方法，比较：
<ul><li>如果<code>equals()</code>返回<code>false</code>：此时key1-value1添加成功。——情况3</li> <li>如果<code>equals()</code>返回<code>true</code>：使用<strong>value1替换value2</strong>。</li></ul></li></ul></li></ul></li> <li><p>关于情况2和情况3：此时key1-value1和原来的数据以链表的方式存储。</p></li> <li><p>当<code>HashMap</code>中的元素越来越多的时候，<code>hash</code>冲突的几率也就越来越高，因为数组的长度是固定的。所以为了提高查询的效率，就要对<code>HashMap</code>的数组进行扩容，而在<code>HashMap</code>数组扩容之后，最消耗性能的点就出现了：<strong>原数组中的数据必须重新计算其在新数组中的位置</strong>，并放进去，这就是<code>resize</code>。在超出临界值（<strong>使用率大于等于0.75，且要存放的位置非空</strong>）时进行扩容。默认的扩容方式：扩容为原来容量的<strong>2倍</strong>，并将原有的数据复制过来。所以如果我们已经预知<code>HashMap</code>中元素的个数， 那么预设元素的个数能够有效的提高<code>HashMap</code>的性能。</p></li></ul></li> <li><p>JDK8 相较于 JDK7 在底层实现方面的不同：</p> <ul><li><p><code>new HashMap([int initialCapacity])</code>底层没有创建一个长度为<code>initialCapacity</code>的数组（默认16），首次调用<code>put()</code>方法时，底层创建长度为<code>initialCapacity</code>的数组</p></li> <li><p>JDK8 底层的数组是：<code>Node[]</code>，而非<code>Entry[]</code></p> <p>每个<code>bucket</code>中存储一个元素，即一个<code>Node</code>对象，但每一个<code>Node</code>对象可以带 一个引用变量<code>next</code>，用于指向下一个元素，因此，在一个桶中，就有可能 生成一个<code>Node</code>链。也可能是一个一个<code>TreeNode</code>对象，每一个<code>TreeNode</code>对象可以有两个叶子结点<code>left</code>和<code>right</code>，因此，在一个桶中，就有可能生成一个<code>TreeNode</code>树。而新添加的元素作为链表的<code>last</code>，或树的叶子结点。</p></li> <li><p>JDK7 底层结构只有：数组+链表。JDK8 中底层结构：数组+链表/红黑树。</p> <ul><li>形成链表时，七上八下（JDK7：新的元素指向旧的元素。JDK8：旧的元素指向新的元素，新元素在链表尾部）</li> <li>当数组的某一个索引位置上（桶）的元素以链表形式存在的数据个数 &gt;= 8 且当前数组的长度 &gt;= 64时，此时此索引位置上的所数据改为使用红黑树存储；否则扩容，不进行转树操作。如果当映射关系被移除后， 下次<code>resize</code>方法时判断树的结点个数低于6个，也会把树再转为链表。</li></ul></li></ul></li> <li><p><code>HashMap</code>中的内部类<code>Node</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> 
  <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
  <span class="token class-name">V</span> value<span class="token punctuation">;</span> 
  <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>&quot;重地&quot;和&quot;&quot;通话&quot;&quot;元素不同，但哈希值相同，<strong>哈希冲突</strong></p> <p><img src="/assets/img/HashMap1.87973e3e.png" alt=""></p></li> <li><p><strong>哈希表元素唯一性</strong>底层依赖两个方法：<strong><code>hashCode()</code>和<code>equals()</code></strong>，必须重写</p> <p><img src="/assets/img/HashMap.58e67eae.png" alt="HashMap"></p></li></ul> <h3 id="_6-6-2-linkedhashmap"><a href="#_6-6-2-linkedhashmap" class="header-anchor">#</a> 6.6.2 LinkedHashMap</h3> <ul><li><p>继承<code>HashMap</code>，底层是<strong>双向链表和哈希表</strong>，迭代出的元素顺序和存入顺序<strong>一致</strong></p> <p>在添加元素时重写了方法，<code>LinkedHashMap</code>中的内部类<code>Entry</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> 
  <span class="token class-name">Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> before<span class="token punctuation">,</span> after<span class="token punctuation">;</span>
  <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>LinkedHashMap</code><strong>插入性能略低</strong>于 <code>HashMap</code>，但在<strong>迭代访问</strong> <code>Map</code> 里的<strong>全部元素</strong>时<strong>有很好的性能</strong>。</p> <p>​</p> <p>​</p></li></ul> <h3 id="_6-6-3-treemap"><a href="#_6-6-3-treemap" class="header-anchor">#</a> 6.6.3 TreeMap</h3> <ul><li><p>底层数据结构是<strong>红黑树（自平衡二叉树），有序</strong>。使用<code>TreeMap</code>保存自定义元素，这个元素的<strong>key必须实现<code>Comparable</code>接口</strong>或构造时<strong>必须提供<code>Comparator</code>实现类</strong></p> <ul><li>元素唯一性通过红黑树存储时确定，相同元素丢弃， <strong>根据<code>compareTo</code>返回值是否是0来决定</strong></li> <li>元素的顺序通过红黑树存储，并通过<strong>中（根）序遍历展示</strong></li></ul></li> <li><p><strong>保证元素的排列方式（按照key排序）：</strong></p> <ol><li><p><strong>自然排序（元素具备比较性）</strong>：<code>Map</code> 中的 <code>key</code> 实现<code>Comparable</code>接口，重写<code>compareTo</code>。</p> <p>向 <code>TreeMap</code> 中添加元素时，只有第一个元素无须比较<code>compareTo()</code>方法，后面添加的所有元素都会调用<code>compareTo()</code>方法进行比较。且重写该对象对应的 <code>equals()</code> 方法时，应保证该方法与 <code>compareTo(Object obj)</code> 方法有一致的结果</p></li> <li><p><strong>比较器排序（集合具备比较性）</strong>：集合构造方法接收<code>key</code>实现<code>Comparator</code>接口的对象，重写<code>compare</code>。</p> <p>向 <code>TreeMap</code> 中添加元素时，只有第一个元素无须比较<code>compare()</code>方法，后面添加的所有元素都会调用<code>compare()</code>方法进行比较。且重写该对象对应的 <code>equals()</code> 方法时，应保证该方法与 <code>compare()</code> 方法有一致的结果</p></li> <li><div class="language-java extra-class"><pre class="language-java"><code> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
     <span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenComparing</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getName</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol></li></ul> <h3 id="_6-6-4-hashtable"><a href="#_6-6-4-hashtable" class="header-anchor">#</a> 6.6.4 Hashtable</h3> <ul><li>线程安全，效率低，相比 HashMap 来说<strong>不能存储 null 的 key 或 value</strong></li></ul> <h3 id="_6-6-5-properties"><a href="#_6-6-5-properties" class="header-anchor">#</a> 6.6.5 Properties</h3> <ul><li><p><code>java.util.Properties</code> 继承自<code>Hashtable</code> ，来表示一个持久的<strong>属性集</strong>。每个键及其对应值都是**<code>String</code><strong>。可以</strong>保存在流中或从流中加载**，常用于处理配置文件。</p></li> <li><p><strong>特有功能</strong></p> <ul><li><code>Object setProperty(String key,String value)</code>   添加元素，调用的父类的put方法</li> <li><code>String getProperty(String key)</code>   获取元素</li> <li><code>Set&lt;String&gt; stringPropertyNames()</code>   获取所有键的集合</li></ul></li> <li><p><strong>和IO流结合的方法</strong></p> <ul><li><p>把<strong>键值对形式的文本</strong>文件内容<strong>加载</strong>到集合中</p> <ul><li><code>void load(InputStream inStream)</code>：不能读取含有中文的键值对</li> <li><code>void load(Reader reader)</code>：能读取含有中文的键值对，<strong>所以一般用字符流</strong></li></ul></li> <li><p>把集合中的数据<strong>存储</strong>到文本文件中</p> <ul><li><p><code>void store(OutputStream out,String comments)</code>：不能写中文</p></li> <li><p><code>void store(Writer writer,String comments)</code>：<strong>可以写中文</strong></p> <p>comments说明保存文字的用途，不能使用中文会乱码，默认是Unicode编码。一般空串<code>&quot;&quot;</code></p></li></ul></li></ul></li></ul> <blockquote><p>文本中的数据，必须是键值对形式，默认就是字符串，不用加双引。可使用=、空格等分隔。#为注释。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">myLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;prop.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	prop<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>bis<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">stringPropertyNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			prop<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//还需要保存到指定文件，略。方法同下方myStore()。</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	bis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">myStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	prop<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	prop<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	prop<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;prop.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	prop<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>bos<span class="token punctuation">,</span> <span class="token string">&quot;mystore&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	bos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="container-之间转换"><a href="#container-之间转换" class="header-anchor">#</a> Container 之间转换</h2> <h3 id="list-与-set-之间转换"><a href="#list-与-set-之间转换" class="header-anchor">#</a> List 与 Set 之间转换</h3> <ul><li>都可以在构造时传递对方</li> <li>都继承了 Collection 的 addAll（以整体添加，但每个都是独立的）、add（当成单独元素）</li></ul> <h2 id="collections（java-util）"><a href="#collections（java-util）" class="header-anchor">#</a> Collections（java.util）</h2> <ul><li><p>针对<strong>Collection/Map</strong>进行操作的<strong>工具类</strong></p></li> <li><p><strong>常见静态方法</strong></p> <ul><li><p><code>static &lt;T&gt; boolean addAll(Collection&lt;T&gt; c, T... elements)</code><strong>添加一些元素</strong></p></li> <li><p><code>static void reverse(List&lt;?&gt; list)</code> ：<strong>反转</strong></p></li> <li><p><code>static void swap(List，int， int)</code>：将指定 list 集合中的 i 处元素和 j 处元素进行<strong>交换</strong></p></li> <li><p><code>static void shuffle(List&lt;?&gt; list)</code> <strong>打乱集合顺序，洗牌</strong></p></li> <li><p><code>static &lt;T&gt; void sort(List&lt;T&gt; list)</code> <strong>元素默认自然排序</strong>，T 需实现 Comparable 接口</p></li> <li><p><code>static &lt;T&gt; void sort(List&lt;T&gt; list，Comparator&lt;? super T&gt;)</code><strong>元素按照指定规则排序</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//可以根据多条规则排序</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o1<span class="token punctuation">,</span> <span class="token class-name">Student</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">int</span> result <span class="token operator">=</span> o1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> o2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> result <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> o1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> o2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> result<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//lambda改写</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">int</span> result <span class="token operator">=</span> o1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> o2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> result <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> o1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> result<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>static &lt;T&gt; int binarySearch(List&lt;?&gt; list,T key)</code></p></li> <li><p><code>static &lt;T&gt; T max/min (Collection&lt;?&gt; coll [,Comparator c])</code></p></li> <li><p><code>static int frequency(Collection&lt;?&gt; c, Object o)</code>：返回指定集合中指定元素的出现次数</p></li> <li><p><code>static &lt;T&gt; boolean replaceAll(List&lt;T&gt; list, T oldVal, T newVal)</code></p></li> <li><p><code>static &lt;T&gt; void copy(List&lt;? super T&gt; dest, List&lt;? extends T&gt; src)</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// IndexOutOfBoundsException: Source does not fit in dest</span>

<span class="token comment">// 改如下</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> dest <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>同步控制方法，将指定集 合包装成线程同步的集合，从而可以解决多线程并发访问集合时的线程安全问题</p> <p><code>Collection.synchronizedCollection/List/Set/Map/SortedSet/SortedMap</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="jdk9对集合添加的优化"><a href="#jdk9对集合添加的优化" class="header-anchor">#</a> JDK9对集合添加的优化</h2> <ul><li><p>Java 9，添加了几种集合工厂方法，更方便创建少量元素的Collection、Map实例。新的<strong>List</strong>、<strong>Set</strong>、<strong>Map</strong>的静态工厂方法可以更方便地创建集合的<strong>不可变实例（存储个数确定时使用）</strong>。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> str1<span class="token operator">=</span><span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">//str1.add(&quot;c&quot;);  这里编译的时候不会错，但是执行的时候会报错，因为是不可变的集合  </span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> str2<span class="token operator">=</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> str3<span class="token operator">=</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre></div><blockquote><p>注意：</p> <p>1、of()方法只是Map，List，Set这三个接口的静态方法，其父类接口和子类实现并没有这类方法，比如    HashSet，ArrayList等等；</p> <p>2、返回的集合是不可变的；List不能使用Collections遍历</p> <p>3、Set和Map接口在调用of方法时，不能有重复的元素，否则会抛出异常</p></blockquote></li></ul> <h2 id="习题"><a href="#习题" class="header-anchor">#</a> 习题</h2> <h3 id="统计字符串中字符个数"><a href="#统计字符串中字符个数" class="header-anchor">#</a> 统计字符串中字符个数</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getStringNum</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> chars<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">Integer</span> integer <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token operator">++</span>integer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="斗地主洗牌发牌看牌"><a href="#斗地主洗牌发牌看牌" class="header-anchor">#</a> 斗地主洗牌发牌看牌</h3> <ul><li>HashMap按牌从大到小存储索引和牌面，并将索引存储到ArrayList中</li> <li>洗牌洗的是ArrayList。发牌时将ArrayList的索引发给TreeSet，以便排序</li> <li>遍历TreeSet并在HashMap中取牌</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getPuke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;大王&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;小王&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> shuZi <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;K&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Q&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;J&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> huaSe <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;♠&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;♥&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;♣&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;♦&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> shuZi<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> h <span class="token operator">:</span> huaSe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> h <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            index<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> player1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> player2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> player3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> diPai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token number">51</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            diPai<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            player1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            player2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            player3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">lookPuke</span><span class="token punctuation">(</span><span class="token string">&quot;player1&quot;</span><span class="token punctuation">,</span> player1<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">lookPuke</span><span class="token punctuation">(</span><span class="token string">&quot;player2&quot;</span><span class="token punctuation">,</span> player2<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">lookPuke</span><span class="token punctuation">(</span><span class="token string">&quot;player3&quot;</span><span class="token punctuation">,</span> player3<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">lookPuke</span><span class="token punctuation">(</span><span class="token string">&quot;dipai&quot;</span><span class="token punctuation">,</span> diPai<span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">lookPuke</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> player<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;的牌：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//遍历TreeSet的Lambda表达式</span>
    player<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="foreach问题"><a href="#foreach问题" class="header-anchor">#</a> Foreach问题</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;MM&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MM&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MM&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 方式一：普通for赋值</span>
<span class="token comment">//for (int i = 0; i &lt; arr.length; i++) {</span>
<span class="token comment">//    arr[i] = &quot;GG&quot;;</span>
<span class="token comment">//}</span>

<span class="token comment">// 方式二：增强for循环</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s <span class="token operator">=</span> <span class="token string">&quot;GG&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 不变，还是 MM，因为局部变量</span>

</code></pre></div><h3 id="list-面试题"><a href="#list-面试题" class="header-anchor">#</a> List 面试题</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testListRemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1，2</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">updateList</span><span class="token punctuation">(</span><span class="token class-name">List</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 到底删除的是元素2还是 index 呢？是index！</span>
    <span class="token comment">//list.remove(new Integer(2));// 此时就删除对象2</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在-list-中去除重复值"><a href="#在-list-中去除重复值" class="header-anchor">#</a> 在 List 中去除重复值</h3> <p>使用 Set，略</p> <h3 id="arraylist、linkedlist、vector-异同"><a href="#arraylist、linkedlist、vector-异同" class="header-anchor">#</a> ArrayList、LinkedList、Vector 异同</h3> <ul><li>相同：都实现了List接口；存储稳定、可重复的数据。</li> <li>不同：
<ul><li><code>ArrayList</code>：底层是<code>Object[] elementData</code>，<strong>支持快速随机访问，增删慢</strong>（或涉及元素移动<code>Arrays.copyOf</code> <code>System.arraycopy</code>），<strong>线程不安全，效率高</strong></li> <li><code>LinkedList</code>：底层是<strong>双向链表</strong>，<strong>查找慢，增删快</strong>，<strong>线程不安全</strong>；长度没有限制，占用空间比<code>ArrayList</code>大（需要维护指针）</li> <li><code>Vector</code>：底层是<code>Object[] elementData</code>，<strong>线程安全，效率低</strong>，即使为了线程安全也别用它</li></ul></li></ul> <h3 id="以自定义的customer类为例，何时需要重写equals"><a href="#以自定义的customer类为例，何时需要重写equals" class="header-anchor">#</a> 以自定义的Customer类为例，何时需要重写equals()?</h3> <ul><li>当一个类有自己特有的“逻辑相等”概念,当改写<code>equals()</code>的时候，总是要改写<code>hashCode()</code>，根据一个类的<code>equals</code>方法(改写后)，两个截然不同的实例有可能在逻辑上是相等的，但是，根据<code>Object.hashCode()</code>方法，它们仅仅是两个对象。</li> <li>因此，违反了“相等的对象必须具有相等的散列码”。</li> <li>结论:复写<code>equals</code>方法的时候一般都需要同时复写<code>hashCode</code>方法。通常参与计算<code>hashCode</code>的对象的属性也应该参与到<code>equals()</code>中进行计算。</li></ul> <h3 id="为什么用eclipse-idea复写hashcode方法，有31这个数字"><a href="#为什么用eclipse-idea复写hashcode方法，有31这个数字" class="header-anchor">#</a> 为什么用Eclipse/IDEA复写hashCode方法，有31这个数字?</h3> <ul><li>选择系数的时候要选择尽量大的系数。因为如果计算出来的hash地址越大，所谓的 “冲突”就越少，查找起来效率也会提高。(减少冲突)</li> <li>并且31只占用5bits,相乘造成数据溢出的概率较小。</li> <li>31可以 由i*31== (i&lt;&lt;5)-1来表示,现在很多虚拟机里面都有做相关优化。(提高算法效率)</li> <li>31是一个素数，素数作用就是如果我用一个数字来乘以这个素数，那么最终出来的结果只能被素数本身和被乘数还有1来整除!(减少冲突)</li></ul> <h3 id="set-重要习题"><a href="#set-重要习题" class="header-anchor">#</a> Set 重要习题</h3> <p><code>Person</code>已重写 <code>hashCode()</code> 和<code>equals()</code>。注意每次都先算当前 <code>hashCode</code>与<code>equals()</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">HashSet</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token string">&quot;AA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token string">&quot;BB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2个对象</span>

p1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;CC&quot;</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 移除时由于p1的 hashCode 是根据 CC 重新计算的，与原先的 AA 的 hashCode 不同，所以删除失败</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2个对象</span>

set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token string">&quot;CC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 此时添加的元素的 hashCode 与 AA 改 CC 的并不相同！</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3个对象</span>

set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token string">&quot;AA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当前位置元素为 CC，所以即使 hashCode 相同，equals 不同，可以添加</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 4个对象</span>
</code></pre></div><h3 id="hashmap和hashtable区别"><a href="#hashmap和hashtable区别" class="header-anchor">#</a> HashMap和Hashtable区别</h3> <ul><li>HashMap：线程不安全，效率高，允许null键和null值</li> <li>Hashtable：线程安全，效率低，不允许null键和null值</li></ul> <h3 id="hashmap-的底层实现原理"><a href="#hashmap-的底层实现原理" class="header-anchor">#</a> HashMap 的底层实现原理</h3> <p>谈谈你对HashMap中put/get方法的认识?</p> <p>谈谈 HashMap的扩容机制?默认大小是多少?</p> <p>什么是负载因子( 或填充比)?</p> <p>什么是吞吐临界值(或阈值、threshold)?</p> <h3 id="负载因子值的大小，对hashmap有什么影响"><a href="#负载因子值的大小，对hashmap有什么影响" class="header-anchor">#</a> 负载因子值的大小，对HashMap有什么影响</h3> <ul><li>负载因子的大小决定了HashMap的数据密度。</li> <li>负载因子越大密度越大，发生碰撞的几率越高，数组中的链表越容易长，造成查询或插入时的比较次数增多，性能会下降。</li> <li>负载因子越小，就越容易触发扩容，数据密度也越小，意味着发生碰撞的几率越小，数组中的链表也就越短，查询和插入时比较的次数也越小，性 能会更高。但是会浪费一定的内容空间。而且经常扩容也会影响性能，建议初始化预设大一点的空间。</li> <li>按照其他语言的参考及研究经验，会考虑将负载因子设置为0.7~0.75，此 时平均检索长度接近于常数。</li></ul> <h3 id="关于map的key是否可以修改"><a href="#关于map的key是否可以修改" class="header-anchor">#</a> 关于Map的key是否可以修改?</h3> <p>不要修改</p> <p>映射关系存储到HashMap中会存储key的hash值，这样就不用在每次查找时重新计算每一个Entry或Node(TreeNode)的hash值了，因此如果已经put到Map中的映射关 系，再修改key的属性，而这个属性又参与hashcode值的计算，那么会导致匹配不上。</p> <h3 id="hashtable-和-concurrenthashmap-的异同"><a href="#hashtable-和-concurrenthashmap-的异同" class="header-anchor">#</a> Hashtable 和 ConcurrentHashMap 的异同</h3> <h3 id="collection和collections的区别"><a href="#collection和collections的区别" class="header-anchor">#</a> Collection和Collections的区别</h3> <ul><li>Collection 是单列集合的顶层接口，有两个子接口List和Set</li> <li>Collections 是针对集合包括Map进行操作的工具类，可以对集合进行排序和查找等</li></ul> <h3 id="姓氏统计"><a href="#姓氏统计" class="header-anchor">#</a> 姓氏统计</h3> <p>一个文本文件中存储着北京所有高校在校生的姓名，格式如下，每行一个名字，姓与名以空格分隔：</p> <div class="language- extra-class"><pre class="language-text"><code>张 三
李 四
王 小五
</code></pre></div><p>现在相统计所有姓氏在文件中出现的次数，如何解决？</p> <h3 id="对一个java源文件中的关键字进行计数"><a href="#对一个java源文件中的关键字进行计数" class="header-anchor">#</a> 对一个Java源文件中的关键字进行计数</h3> <p>提示:Java源文件中的每一个单词，需要确定该单词是否是一个关键字。为了高效处理这个问题，将所有的关键字保存在一个HashSet中。用contains() 来测试。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">11/10/2019, 1:13:27 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Java/Core/5 Generic.html" class="prev">5 Generic</a></span> <span class="next"><a href="/Java/Core/7 Thread.html">7 Thread</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.11b86352.js" defer></script><script src="/assets/js/2.dc2cb52a.js" defer></script><script src="/assets/js/4.4809e9ae.js" defer></script>
  </body>
</html>
