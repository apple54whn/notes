# 基本概念

## Dev 和 Ops 视角

![image-20200420003109861](./images/image-20200420003109861.png)

*   Index 索引
    *   Type 类型
    *   Document 文档

*   Node 节点
    *   Shard 分片



## Index 索引

### Index

Index 是 Document 的容器，是**一类 Document 的集合**

Index 体现了**逻辑**空间的概念

每个 Index 都有自己的 **Mapping** 定义，用于定义包含的 **Document 的 Field 名称 和 Field 类型**



### Mapping

Mapping 定义了 Document 中 Field 类型



### Setting

Setting 定义了不同的数据分布



### Index 的不同语义

Indexing （动词）Document 到 ES 的 Index（名词）中

*   名词：一个 ES 集群中，可以创建很多个不同的 Index
*   动词：保存一个 Document 到 ES 的过程也称作 Indexing（ES 创建一个倒排 Index 的过程）
*   名词：一个 B 树 Index，一个倒排 Index





## ~~Type 类型~~

*   在 7.0 之前，一个 Index 可以设置多个 Types
*   6.0 开始，Type 已经被 Deprecated。7.0 开始一个 Index 只能创建一个 Type：`_doc`





## Document 文档

### 概述

*   ES 是面向 Document 的，Document 是所有**可搜索数据的最小单位**
    *   日志文件中的日志项
    *   一本电影的具体信息；一张唱片的详细信息
    *   MP3 播放器里的一首歌；一篇 PDF 文档中的具体内容
*   **Document 会被序列化成 JSON，保存**在 ES 中
    *   **JSON 对象由 Field 组成**
    *   每个 Field 都有对应的类型（字符串、数值、布尔、日期、二进制、范围类型）
*   **每个 Document 都有一个 Unique ID**
    *   可以自己指定 ID
    *   可以通过 ES 自动生成



### JSON Document

*   一篇 Documemt 包含了一系列的 Field，类似数据库中表的一条记录

*   JSON 文档格式灵活，支持数据，支持嵌套，无需预先定义格式。Field 的类型可以指定或通过 ES 自动推算

    

如 CVS 文件转换为。。。



### Document 的元数据

每一篇 Document 都有元数据，用于标注 Document 的相关信息

*   _index：Document 所属的 Index 名
*   _type：Document 所属的 Type 名
*   _id：文档的唯一 ID
*   _source：文档的原始 JSON 数据
*   ~~_all：整合所有 Field 内容到该字段。已被废除~~
*   _version：Document 的版本信息
*   _score：相关性打分





## 抽象与类比

| RDBMS  |      ES       |
| :----: | :-----------: |
| Table  | Index（Type） |
|  Row   |   Document    |
| Column |     Field     |
| Schema |    Mapping    |
|  SQL   |      DSL      |

